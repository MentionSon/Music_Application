{"version":3,"sources":["style.js","assets/global-style.js","application/Home/style.js","api/utils.js","application/Player/miniPlayer/style.js","application/Player/store/constant.js","application/Player/store/actionCreator.js","application/Player/store/model.js","baseUI/ProgressCircle/index.js","application/Player/miniPlayer/index.js","application/Player/normalPlayer/style.js","baseUI/ProgressBar/index.js","application/Player/normalPlayer/index.js","application/Player/playList/style.js","baseUI/Loading/index.js","baseUI/LoadingV2/index.js","baseUI/Scroll/index.js","application/Player/playList/index.js","application/Player/index.js","application/Home/index.js","components/Slider/style.js","components/Slider/index.js","components/List/style.js","components/List/index.js","api/config.js","api/request.js","application/Recommend/store/model.js","application/Recommend/store/actionCreator.js","application/Recommend/store/constant.js","application/Recommend/index.js","baseUI/HorizonItem/index.js","application/Singers/style.js","application/Singers/store/actionCreators.js","application/Singers/store/constant.js","application/Singers/store/model.js","application/Singers/index.js","application/Rank/store/index.js","application/Rank/store/model.js","application/Rank/style.js","application/Rank/index.js","application/Album/style.js","baseUI/Header/index.js","application/Album/store/actionCreator.js","application/Album/store/constant.js","baseUI/MusicNote/index.js","application/Album/index.js","application/Album/store/model.js","application/Singer/style.js","application/SongList/style.js","application/SongList/index.js","application/Singer/store/actionCreator.js","application/Singer/store/constant.js","router/index.js","application/Singer/index.js","application/Singer/store/model.js","application/Search/index.js","application/Recommend/store/reducer.js","application/Singers/store/reducer.js","application/Album/store/reducer.js","application/Singer/store/reducer.js","application/Player/store/reducer.js","store/reducer.js","store/index.js","App.js","serviceWorker.js","index.js"],"names":["GlobalStyle","createGlobalStyle","Top","styled","div","style","Tab","TabItem","getCount","count","Math","floor","debounce","func","delay","timer","args","clearTimeout","setTimeout","apply","getName","list","str","map","item","index","name","isEmptyObject","obj","Object","keys","length","formatPlayTime","interval","minute","second","toString","padStart","rotate","keyframes","MiniPlayerContainer","SET_CURRENT_SONG","changeCurrentIndex","data","type","usePlayer","dispatch","useDispatch","fullScreen","useSelector","state","getIn","playing","currentSong","toJS","currentIndex","mode","playList","sequencePlayList","playCount","size","showPlayList","toggleFullScreen","useCallback","changeFullScreen","togglePlaying","changePlayingState","changeCurrentPlayIndex","changeCurrentSongData","fromJS","changeCurrentSong","changeCurrentPlayListIndex","changeMode","changePlayMode","changeMusicPlayList","changePlayList","toggleShowPlayList","changeShowPlayList","CircleWrapper","React","memo","props","radius","percent","dashArray","PI","dashOffset","width","height","viewBox","version","xmlns","className","r","cx","cy","fill","strokeDasharray","strokeDashoffset","children","song","clickPlay","miniPlayerRef","useRef","CSSTransition","in","timeout","classNames","onEnter","current","display","onExited","ref","onClick","src","al","picUrl","alt","ar","left","e","stopPropagation","console","log","NormalPlayerContainer","Middle","CDWrapper","Bottom","ProgressWrapper","Operators","ProgressBarWrapper","percentChange","progressBar","progress","progressBtn","useState","touch","setTouch","setProgressOffset","offsetWidth","transform","changePercent","barWidth","clientWidth","curPercent","useEffect","initiated","rect","getBoundingClientRect","offset","min","pageX","onTouchStart","startTouch","startX","touches","onTouchMove","initialed","deltaX","max","onTouchEnd","endTouch","JSON","parse","stringify","currentTime","duration","onProgressChange","handlePrev","handleNext","normalPlayerRef","cdWrapperRef","mountOnEnter","window","innerWidth","scale","x","y","innerHeight","_getPosAndScale","animation","0","60","100","animations","registerAnimation","presets","easing","runAnimation","onEntered","cdWrapperDom","unregisterAnimation","aria-hidden","PlayListWrapper","ScrollWrapper","ListContent","loading","LoadingWrapper","dance","Loading","ScrollContainer","PullUpLoading","PullDownLoading","Scroll","forwardRef","betterScroll","setBetterScroll","scrollContainerRef","direction","click","refresh","pullUpLoading","pullDownLoading","bounceTop","bounceBottom","pullUp","pullDown","onScroll","pullUpDebounce","useMemo","pullDownDebounce","scroll","BetterScroll","scrollX","scrollY","probeType","bounce","top","bottom","on","off","handlePullUp","maxScrollY","HandlePullDown","pos","useImperativeHandle","scrollTo","getBScroll","PullUpdisplayStyle","PullDowndisplayStyle","defaultProps","isShow","setIsShow","playListRef","listWrapperRef","onEntering","onExiting","key","id","handleChangeCurrentIndex","getCurrentIcon","setCurrentTime","setDuration","presetSong","setPresetSong","audioRef","songReady","isNaN","initAudioPlay","a","autoplay","play","then","dt","togglePlayingState","handleLoop","pause","newTime","onTimeUpdate","target","route","path","title","to","activeClassName","renderRoutes","routes","SliderContainer","sliderSwiper","setSliderSwiper","bannerList","newSliderSwiper","Swiper","loop","disableOnInteraction","pagination","el","slider","imageUrl","ListWrapper","List","ListItem","withRouter","recommendList","history","push","placeholder","axiosInstance","axios","create","baseURL","interceptors","response","use","res","error","categoryTypes","area","alphaTypes","getHotSingerListRequest","get","getSingerListRequest","inital","pageCount","getRankListRequest","getAlbumDetailRequest","getSingerInfoRequest","useRecommend","bannerListJS","recommendListJS","enterLoading","getBanners","result","banners","getRecommends","Content","forceCheck","span","Horizon","horizonType","oldVal","handleClick","Category","CategoryDom","tagElms","querySelectorAll","totalWidth","Array","from","forEach","tag","NavContainer","ListContainer","EnterLoading","changeSingerList","changePullUpLoading","changePullDownLoading","useHotSingerList","hot","singerList","changePage","artists","getHotSingers","getSingers","pullUpRefreshDispatch","pullDownRefreshDishpatch","setHot","category","setCategory","alpha","setAlpha","val","handleUpdateCategory","handleUpdateAlpha","accountId","detial","renderSingerList","changeRankList","changeLoading","defaultState","rankList","useRank","disPatch","getRankList","Container","ul","globalRank","li","tracks","SongList","globalStartIndex","i","filterIndex","officialList","slice","globalList","renderRankList","global","coverImgId","detail","coverImgUrl","updateFrequency","first","renderSongList","displayStyle","TopDesc","background","Menu","showBackground","SongItem","HeaderContainer","Header","changeEnterLoading","MusicNote","iconsRef","createNode","txt","template","tempNode","document","createElement","innerHTML","firstChild","node","appendChild","call","running","addEventListener","this","querySelector","startAnimation","currentAlbum","getAlbumList","playlist","useAlbum","match","params","showStatus","setShowStatus","handleBack","HeaderEl","musicNoteRef","selectItem","nativeEvent","clientX","clientY","handleScroll","abs","headerDom","backgroundColor","opacity","unmountOnExit","appear","goBack","subscribedCount","icon","ImgWrapper","bgUrl","CollectButton","SongListWrapper","BgLayer","SongsList","refs","collectCount","showCollect","songs","musicAnimation","totalCount","persist","album","songList","component","Home","exact","render","Recommend","Album","Singers","artist","songsOfArtist","getArtistAndHotSongs","hotSongs","useSinger","collectButton","imageWrapper","songScrollWrapper","songScroll","header","layer","initialHeight","newY","imageDOM","buttonDOM","headerDOM","layerDOM","minScrollY","zIndex","paddingTop","HEADER_HEIGHT","h","offsetHeight","initStyle","Rank","combineReducers","recommend","action","set","singers","rank","singer","player","composeEnhances","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducer","applyMiddleware","thunk","App","Boolean","location","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.e01444f1.chunk.js","sourcesContent":["import { createGlobalStyle } from \"styled-components\";\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n  html, body, div, span, applet, object, iframe,\r\n  h1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\n  a, abbr, acronym, address, big, cite, code,\r\n  del, dfn, em, img, ins, kbd, q, s, samp,\r\n  small, strike, strong, sub, sup, tt, var,\r\n  b, u, i, center,\r\n  dl, dt, dd, ol, ul, li,\r\n  fieldset, form, label, legend,\r\n  table, caption, tbody, tfoot, thead, tr, th, td,\r\n  article, aside, canvas, details, embed, \r\n  figure, figcaption, footer, header, hgroup, \r\n  menu, nav, output, ruby, section, summary,\r\n  time, mark, audio, video {\r\n    margin: 0;\r\n    padding: 0;\r\n    border: 0;\r\n    font-size: 100%;\r\n    font: inherit;\r\n    vertical-align: baseline;\r\n  }\r\n  /* HTML5 display-role reset for older browsers */\r\n  article, aside, details, figcaption, figure, \r\n  footer, header, hgroup, menu, nav, section {\r\n    display: block;\r\n  }\r\n  body {\r\n    line-height: 1;\r\n  }\r\n  html, body {\r\n    background: #f2f3f4;;\r\n  }\r\n  ol, ul {\r\n    list-style: none;\r\n  }\r\n  blockquote, q {\r\n    quotes: none;\r\n  }\r\n  blockquote:before, blockquote:after,\r\n  q:before, q:after {\r\n    content: '';\r\n    content: none;\r\n  }\r\n  table {\r\n    border-collapse: collapse;\r\n    border-spacing: 0;\r\n  }\r\n  a {\r\n    text-decoration: none;\r\n    color: #fff;\r\n  }\r\n`;\r\n","// 扩大可点击区域\r\nconst extendClick = () => {\r\n  return `\r\n    position: relative;\r\n    &:before {\r\n      content: '';\r\n      position: absolute;\r\n      top: -10px; bottom: -10px; left: -10px; right: -10px;\r\n    };\r\n  `;\r\n};\r\n// 一行文字溢出部分用... 代替\r\nconst noWrap = () => {\r\n  return `\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n  `;\r\n};\r\n\r\nexport default {\r\n  \"theme-color\": \"#0099CC\",\r\n  \"theme-color-shadow\": \"rgba(0, 153, 204, .5)\",\r\n  \"font-color-light\": \"#f1f1f1\",\r\n  \"font-color-desc\": \"#2E3030\",\r\n  \"font-color-desc-v2\": \"#bba8a8\", // 略淡\r\n  \"font-size-ss\": \"10px\",\r\n  \"font-size-s\": \"12px\",\r\n  \"font-size-m\": \"14px\",\r\n  \"font-size-l\": \"16px\",\r\n  \"font-size-ll\": \"18px\",\r\n  \"border-color\": \"#e4e4e4\",\r\n  \"background-color\": \"#f2f3f4\",\r\n  \"background-color-shadow\": \"rgba(0, 0, 0, 0.3)\",\r\n  \"highlight-background-color\": \"#fff\",\r\n  extendClick,\r\n  noWrap,\r\n};\r\n","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const Top = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  padding: 5px 10px;\r\n  background: ${style[\"theme-color\"]};\r\n  & > span {\r\n    line-height: 40px;\r\n    color: #f1f1f1;\r\n    font-size: 20px;\r\n    &.iconfont {\r\n      font-size: 25px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Tab = styled.div`\r\n  height: 44px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-around;\r\n  background: ${style[\"theme-color\"]};\r\n  a {\r\n    flex: 1;\r\n    padding: 2px 0;\r\n    font-size: 14px;\r\n    color: #e4e4e4;\r\n    &.selected {\r\n      span {\r\n        padding: 3px 0;\r\n        font-weight: 700;\r\n        color: #f1f1f1;\r\n        border-bottom: 2px solid #f1f1f1;\r\n      }\r\n    }\r\n  }\r\n`;\r\nexport const TabItem = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n","export const getCount = (count) => {\r\n  if (count < 0) return;\r\n  if (count < 1000) {\r\n    return count;\r\n  } else if (Math.floor(count / 1000) < 1000) {\r\n    return Math.floor(count / 1000) / 10 + \"T\";\r\n  } else {\r\n    return Math.floor(count / 1000000) + \"M\";\r\n  }\r\n};\r\n\r\nexport const debounce = (func, delay) => {\r\n  let timer;\r\n  return (...args) => {\r\n    if (timer) {\r\n      clearTimeout();\r\n    }\r\n    timer = setTimeout(() => {\r\n      func.apply(this, args);\r\n      clearTimeout(timer);\r\n    }, delay);\r\n  };\r\n};\r\n\r\nexport const filterIndex = (rankList) => {\r\n  for (let i = 0; i < rankList.length - 1; i++) {\r\n    if (rankList[i].tracks.length && !rankList[i + 1].tracks.length) {\r\n      return i + 1;\r\n    }\r\n  }\r\n};\r\n\r\nexport const getName = (list) => {\r\n  let str = \"\";\r\n  list.map((item, index) => {\r\n    str += index === 0 ? item.name : \"/\" + item.name;\r\n    return item;\r\n  });\r\n  return str;\r\n};\r\n\r\nexport const isEmptyObject = (obj) => !obj || Object.keys(obj).length === 0;\r\n\r\nexport const getSongUrl = (id) => {\r\n  return `https://music.163.com/song/media/outer/url?id=${id}.mp3`;\r\n};\r\n\r\nexport const formatPlayTime = (interval) => {\r\n  interval = interval | 0; // |0表示向下取整\r\n  const minute = (interval / 60) | 0;\r\n  const second = (interval % 60).toString().padStart(2, \"0\");\r\n  return `${minute}:${second}`;\r\n};\r\n","import styled, { keyframes } from \"styled-components\";\r\nimport style from \"../../../assets/global-style\";\r\n\r\nconst rotate = keyframes`\r\n  0%{\r\n    transform: rotate(0);\r\n  }\r\n  100%{\r\n    transform: rotate(360deg);\r\n  }\r\n`;\r\n\r\nexport const MiniPlayerContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  width: 100%;\r\n  height: 60px;\r\n  background: ${style[\"highlight-background-color\"]};\r\n  &.mini-enter {\r\n    transform: translate3d(0, 100%, 0);\r\n  }\r\n  &.mini-enter-active {\r\n    transform: translate3d(0, 0, 0);\r\n    transition: all 0.4s;\r\n  }\r\n  &.mini-exit-active {\r\n    transform: translate3d(0, 100%, 0);\r\n    transition: all 0.4s;\r\n  }\r\n  .icon {\r\n    flex: 0 0 40px;\r\n    width: 40px;\r\n    height: 40px;\r\n    padding: 0 10px 0 20px;\r\n    .imgWrapper {\r\n      width: 100%;\r\n      height: 100%;\r\n      img {\r\n        border-radius: 50%;\r\n        &.play {\r\n          animation: ${rotate} 10s infinite;\r\n          &.pause {\r\n            animation-play-state: paused;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .text {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    flex: 1;\r\n    line-height: 20px;\r\n    overflow: hidden;\r\n    .name {\r\n      margin-bottom: 2px;\r\n      font-size: ${style[\"font-size-m\"]};\r\n      color: ${style[\"font-color-desc\"]};\r\n      ${style.noWrap()}\r\n    }\r\n    .desc {\r\n      font-size: ${style[\"font-size-s\"]};\r\n      color: ${style[\"font-color-desc-v2\"]};\r\n      ${style.noWrap()}\r\n    }\r\n  }\r\n  .control {\r\n    flex: 0 0 30px;\r\n    padding: 0 10px;\r\n    i,\r\n    .icon-playlist {\r\n      font-size: 30px;\r\n      color: ${style[\"theme-color\"]};\r\n    }\r\n    .icon-mini {\r\n      font-size: 16px;\r\n      position: absolute;\r\n      top: 8px;\r\n      &.icon-play {\r\n        left: 9px;\r\n      }\r\n    }\r\n  }\r\n`;\r\n","export const SET_CURRENT_SONG = \"player/SET_CURRENT_SONG\";\r\nexport const SET_FULL_SCREEN = \"player/SET_FULL_SCREEN\";\r\nexport const SET_PLAYING_STATE = \"player/SET_PLAYING_STATE\";\r\nexport const SET_SEQUENCE_PLAYLIST = \"player/SET_SEQUECE_PLAYLIST\";\r\nexport const SET_PLAYLIST = \"player/SET_PLAYLIST\";\r\nexport const SET_PLAY_MODE = \"player/SET_PLAY_MODE\";\r\nexport const SET_CURRENT_INDEX = \"player/SET_CURRENT_INDEX\";\r\nexport const SET_SHOW_PLAYLIST = \"player/SET_SHOW_PLAYLIST\";\r\n","import {\r\n  SET_CURRENT_SONG,\r\n  SET_FULL_SCREEN,\r\n  SET_PLAYING_STATE,\r\n  SET_SEQUENCE_PLAYLIST,\r\n  SET_PLAYLIST,\r\n  SET_PLAY_MODE,\r\n  SET_CURRENT_INDEX,\r\n  SET_SHOW_PLAYLIST,\r\n} from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nexport const changeCurrentSong = (data) => ({\r\n  type: SET_CURRENT_SONG,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changeFullScreen = (data) => ({\r\n  type: SET_FULL_SCREEN,\r\n  data: data,\r\n});\r\n\r\nexport const changePlayingState = (data) => ({\r\n  type: SET_PLAYING_STATE,\r\n  data: data,\r\n});\r\n\r\nexport const changeSequencePlayList = (data) => ({\r\n  type: SET_SEQUENCE_PLAYLIST,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changePlayList = (data) => ({\r\n  type: SET_PLAYLIST,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changePlayMode = (data) => ({\r\n  type: SET_PLAY_MODE,\r\n  data: data,\r\n});\r\n\r\nexport const changeCurrentIndex = (data) => ({\r\n  type: SET_CURRENT_INDEX,\r\n  data: data,\r\n});\r\n\r\nexport const changeShowPlayList = (data) => ({\r\n  type: SET_SHOW_PLAYLIST,\r\n  data: data,\r\n});\r\n","import { useSelector, useDispatch } from \"react-redux\";\r\nimport { useCallback } from \"react\";\r\nimport {\r\n  changeFullScreen,\r\n  changePlayingState,\r\n  changeCurrentIndex,\r\n  changeCurrentSong,\r\n  changePlayMode,\r\n  changePlayList,\r\n  changeShowPlayList,\r\n} from \"./actionCreator\";\r\n\r\nexport const usePlayer = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const fullScreen = useSelector((state) =>\r\n    state.getIn([\"player\", \"fullScreen\"])\r\n  );\r\n\r\n  const playing = useSelector((state) => state.getIn([\"player\", \"playing\"]));\r\n\r\n  const currentSong =\r\n    useSelector((state) => state.getIn([\"player\", \"currentSong\"])).toJS() || {};\r\n\r\n  const currentIndex = useSelector((state) =>\r\n    state.getIn([\"player\", \"currentIndex\"])\r\n  );\r\n\r\n  const mode = useSelector((state) => state.getIn([\"player\", \"mode\"]));\r\n\r\n  const playList =\r\n    useSelector((state) => state.getIn([\"player\", \"playList\"])).toJS() || [];\r\n\r\n  const sequencePlayList =\r\n    useSelector((state) =>\r\n      state.getIn([\"player\", \"sequencePlayList\"])\r\n    ).toJS() || [];\r\n\r\n  const playCount = useSelector((state) => state.getIn([\"player\", \"playList\"]))\r\n    .size;\r\n\r\n  const showPlayList = useSelector((state) =>\r\n    state.getIn([\"player\", \"showPlayList\"])\r\n  );\r\n\r\n  const toggleFullScreen = useCallback((data) => {\r\n    dispatch(changeFullScreen(data));\r\n  }, []);\r\n\r\n  const togglePlaying = useCallback((data) => {\r\n    dispatch(changePlayingState(data));\r\n  }, []);\r\n\r\n  const changeCurrentPlayIndex = useCallback((index) => {\r\n    dispatch(changeCurrentIndex(index));\r\n  }, []);\r\n\r\n  const changeCurrentSongData = useCallback((data) => {\r\n    dispatch(changeCurrentSong(data));\r\n  }, []);\r\n\r\n  const changeCurrentPlayListIndex = useCallback((data) => {\r\n    dispatch(changeCurrentIndex(data));\r\n  }, []);\r\n\r\n  const changeMode = useCallback((data) => {\r\n    dispatch(changePlayMode(data));\r\n  }, []);\r\n\r\n  const changeMusicPlayList = useCallback((data) => {\r\n    dispatch(changePlayList(data));\r\n  }, []);\r\n\r\n  const toggleShowPlayList = useCallback((data) => {\r\n    dispatch(changeShowPlayList(data));\r\n  }, []);\r\n\r\n  return {\r\n    fullScreen,\r\n    playing,\r\n    currentSong,\r\n    currentIndex,\r\n    mode,\r\n    playList,\r\n    sequencePlayList,\r\n    playCount,\r\n    showPlayList,\r\n    toggleFullScreen,\r\n    togglePlaying,\r\n    changeCurrentPlayIndex,\r\n    changeCurrentSongData,\r\n    changeCurrentPlayListIndex,\r\n    changeMode,\r\n    changeMusicPlayList,\r\n    toggleShowPlayList,\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nconst CircleWrapper = styled.div`\r\n  position: relative;\r\n  circle {\r\n    stroke-width: 8px;\r\n    transform-origin: center;\r\n    &.progress-background {\r\n      transform: scale(0.9);\r\n      stroke: ${style[\"theme-color-shadow\"]};\r\n    }\r\n    &.progress-bar {\r\n      transform: scale(0.9) rotate(-90deg);\r\n      stroke: ${style[\"theme-color\"]};\r\n    }\r\n  }\r\n`;\r\n\r\nfunction ProgressCircle(props) {\r\n  const { radius, percent } = props;\r\n  // 整个背景的周长\r\n  const dashArray = Math.PI * 100;\r\n  // 没有高亮的部分，剩下高亮的就是进度\r\n  const dashOffset = (1 - percent) * dashArray;\r\n\r\n  return (\r\n    <CircleWrapper>\r\n      <svg\r\n        width={radius}\r\n        height={radius}\r\n        viewBox=\"0 0 100 100\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <circle\r\n          className=\"progress-background\"\r\n          r=\"50\"\r\n          cx=\"50\"\r\n          cy=\"50\"\r\n          fill=\"transparent\"\r\n        />\r\n        <circle\r\n          className=\"progress-bar\"\r\n          r=\"50\"\r\n          cx=\"50\"\r\n          cy=\"50\"\r\n          fill=\"transparent\"\r\n          strokeDasharray={dashArray}\r\n          strokeDashoffset={dashOffset}\r\n        />\r\n      </svg>\r\n      {props.children}\r\n    </CircleWrapper>\r\n  );\r\n}\r\n\r\nexport default React.memo(ProgressCircle);\r\n","import React, { useRef } from \"react\";\r\nimport { getName } from \"../../../api/utils\";\r\nimport { MiniPlayerContainer } from \"./style\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { usePlayer } from \"../store/model\";\r\nimport ProgressCircle from \"../../../baseUI/ProgressCircle\";\r\n\r\nconst MiniPlayer = (props) => {\r\n  const { playing, song, percent, clickPlay } = props;\r\n\r\n  const {\r\n    fullScreen,\r\n    showPlayList,\r\n    toggleFullScreen,\r\n    toggleShowPlayList,\r\n  } = usePlayer();\r\n\r\n  const miniPlayerRef = useRef();\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={!fullScreen}\r\n      timeout={400}\r\n      classNames=\"mini\"\r\n      onEnter={() => {\r\n        miniPlayerRef.current.style.display = \"flex\";\r\n      }}\r\n      onExited={() => {\r\n        miniPlayerRef.current.style.display = \"none\";\r\n      }}\r\n    >\r\n      <MiniPlayerContainer\r\n        ref={miniPlayerRef}\r\n        onClick={() => {\r\n          toggleFullScreen(true);\r\n        }}\r\n      >\r\n        <div className=\"icon\">\r\n          <div className=\"imgWrapper\">\r\n            <img\r\n              className=\"play\"\r\n              src={song.al.picUrl}\r\n              width=\"40\"\r\n              height=\"40\"\r\n              alt=\"img\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"text\">\r\n          <h2 className=\"name\">{song.name}</h2>\r\n          <p className=\"desc\">{getName(song.ar)}</p>\r\n        </div>\r\n        <div className=\"control\">\r\n          <ProgressCircle radius={32} percent={percent}>\r\n            {playing ? (\r\n              <i\r\n                className=\"fa fa-pause icon-mini\"\r\n                style={{ left: \"9px\" }}\r\n                onClick={(e) => clickPlay(e, false)}\r\n              ></i>\r\n            ) : (\r\n              <i\r\n                className=\"fa fa-play icon-mini\"\r\n                style={{ left: \"11px\" }}\r\n                onClick={(e) => clickPlay(e, true)}\r\n              ></i>\r\n            )}\r\n          </ProgressCircle>\r\n        </div>\r\n        <div\r\n          className=\"control\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            toggleShowPlayList(true);\r\n            console.log(showPlayList);\r\n          }}\r\n        >\r\n          <i className=\"fa fa-music\"></i>\r\n        </div>\r\n      </MiniPlayerContainer>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nexport default React.memo(MiniPlayer);\r\n","import styled, { keyframes } from \"styled-components\";\r\nimport style from \"../../../assets/global-style\";\r\n\r\nconst rotate = keyframes`\r\n  0%{\r\n    transform: rotate(0);\r\n  }\r\n  100%{\r\n    transform: rotate(360deg);\r\n  }\r\n`;\r\nexport const NormalPlayerContainer = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 150;\r\n  background: ${style[\"background-color\"]};\r\n  &.normal-enter,\r\n  &.normal-exit-done {\r\n    .top {\r\n      transform: translate3d(0, -100px, 0);\r\n    }\r\n    .bottom {\r\n      transform: translate3d(0, 100px, 0);\r\n    }\r\n  }\r\n  &.normal-enter-active,\r\n  &.normal-exit-active {\r\n    .top,\r\n    .bottom {\r\n      transform: translate3d(0, 0, 0);\r\n      transition: all 0.4s cubic-bezier(0.86, 0.18, 0.82, 1.32);\r\n    }\r\n    opacity: 1;\r\n    transition: all 0.4s;\r\n  }\r\n  &.normal-exit-active {\r\n    opacity: 0;\r\n  }\r\n  .background {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: -1;\r\n    opacity: 0.6;\r\n    filter: blur(20px);\r\n    &.layer {\r\n      background: ${style[\"font-color-desc\"]};\r\n      opacity: 0.3;\r\n      filter: none;\r\n    }\r\n  }\r\n`;\r\nexport const Top = styled.div`\r\n  position: relative;\r\n  margin-bottom: 25px;\r\n  .back {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 6px;\r\n    z-index: 50;\r\n    i {\r\n      display: block;\r\n      padding: 9px;\r\n      font-size: 24px;\r\n      color: ${style[\"font-color-desc\"]};\r\n      font-weight: bold;\r\n      transform: rotate (90deg);\r\n    }\r\n  }\r\n  .title {\r\n    width: 70%;\r\n    margin: 0 auto;\r\n    line-height: 40px;\r\n    text-align: center;\r\n    font-size: ${style[\"font-size-l\"]};\r\n    color: ${style[\"font-color-desc\"]};\r\n    ${style.noWrap()};\r\n  }\r\n  .subtitle {\r\n    line-height: 20px;\r\n    text-align: center;\r\n    font-size: ${style[\"font-size-m\"]};\r\n    color: ${style[\"font-color-desc-v2\"]};\r\n    ${style.noWrap()};\r\n  }\r\n`;\r\nexport const Middle = styled.div`\r\n  position: fixed;\r\n  width: 100%;\r\n  top: 80px;\r\n  bottom: 170px;\r\n  white-space: nowrap;\r\n  font-size: 0;\r\n  overflow: hidden;\r\n`;\r\nexport const CDWrapper = styled.div`\r\n  position: absolute;\r\n  margin: auto;\r\n  top: 10%;\r\n  left: 0;\r\n  right: 0;\r\n  width: 80%;\r\n  box-sizing: border-box;\r\n  height: 80vw;\r\n  .cd {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 50%;\r\n    .image {\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      box-sizing: border-box;\r\n      border-radius: 50%;\r\n      border: 10px solid rgba (255, 255, 255, 0.1);\r\n    }\r\n    .play {\r\n      animation: ${rotate} 20s linear infinite;\r\n      &.pause {\r\n        animation-play-state: paused;\r\n      }\r\n    }\r\n  }\r\n  .playing_lyric {\r\n    margin-top: 20px;\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n    white-space: normal;\r\n    text-align: center;\r\n    color: rgba (255, 255, 255, 0.5);\r\n  }\r\n`;\r\n\r\nexport const Bottom = styled.div`\r\n  position: absolute;\r\n  bottom: 50px;\r\n  width: 100%;\r\n`;\r\nexport const ProgressWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 80%;\r\n  margin: 0px auto;\r\n  padding: 10px 0;\r\n  .time {\r\n    color: ${style[\"font-color-desc\"]};\r\n    font-size: ${style[\"font-size-s\"]};\r\n    flex: 0 0 30px;\r\n    line-height: 30px;\r\n    width: 30px;\r\n    &.time-l {\r\n      text-align: left;\r\n    }\r\n    &.time-r {\r\n      text-align: right;\r\n    }\r\n  }\r\n  .progress-bar-wrapper {\r\n    flex: 1;\r\n  }\r\n`;\r\nexport const Operators = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  .icon {\r\n    // font-weight: 300;\r\n    font-size: 23px;\r\n    flex: 1;\r\n    color: ${style[\"font-color-desc\"]};\r\n    &.disable {\r\n      color: ${style[\"theme-color-shadow\"]};\r\n    }\r\n  }\r\n  .i-left {\r\n    text-align: right;\r\n  }\r\n  .i-center {\r\n    padding: 0 20px;\r\n    text-align: center;\r\n    i {\r\n      font-size: 40px;\r\n    }\r\n  }\r\n  .i-right {\r\n    text-align: left;\r\n  }\r\n  .icon-favorite {\r\n    color: ${style[\"theme-color\"]};\r\n  }\r\n`;\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nconst ProgressBarWrapper = styled.div`\r\n  height: 30px;\r\n  .bar-inner {\r\n    position: relative;\r\n    top: 13px;\r\n    height: 4px;\r\n    background: rgba(0, 0, 0, 0.3);\r\n    .progress {\r\n      position: absolute;\r\n      height: 100%;\r\n      background: ${style[\"theme-color\"]};\r\n    }\r\n    .progress-btn-wrapper {\r\n      position: absolute;\r\n      left: -8px;\r\n      top: -13px;\r\n      width: 30px;\r\n      height: 30px;\r\n      .progress-btn {\r\n        position: relative;\r\n        top: 7px;\r\n        left: 7px;\r\n        box-sizing: border-box;\r\n        width: 16px;\r\n        height: 16px;\r\n        border: 3px solid ${style[\"border-color\"]};\r\n        border-radius: 50%;\r\n        background: ${style[\"theme-color\"]};\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst ProgressBar = (props) => {\r\n  const { percent, percentChange } = props;\r\n\r\n  const progressBar = useRef();\r\n  const progress = useRef();\r\n  const progressBtn = useRef();\r\n  const [touch, setTouch] = useState({});\r\n\r\n  const progressBtnWidth = 16;\r\n\r\n  const setProgressOffset = (offsetWidth) => {\r\n    progress.current.style.width = `${offsetWidth}px`;\r\n    progressBtn.current.style.transform = `translate3D(${offsetWidth}px, 0, 0)`;\r\n  };\r\n\r\n  const progressTouchStart = (e) => {\r\n    const startTouch = {};\r\n    startTouch.initialed = true;\r\n    startTouch.startX = e.touches[0].pageX;\r\n    startTouch.left = progress.current.clientWidth;\r\n    setTouch(startTouch);\r\n  };\r\n\r\n  const progressTouchMove = (e) => {\r\n    if (!touch.initialed) {\r\n      return;\r\n    }\r\n    const deltaX = e.touches[0].pageX - touch.startX;\r\n    const barWidth = progressBar.current.clientWidth - progressBtnWidth;\r\n    const offset = Math.min(Math.max(0, touch.left + deltaX), barWidth);\r\n    setProgressOffset(offset);\r\n    changePercent();\r\n  };\r\n\r\n  const progressTouchEnd = () => {\r\n    const endTouch = JSON.parse(JSON.stringify(touch));\r\n    endTouch.initialed = false;\r\n    setTouch(endTouch);\r\n  };\r\n\r\n  const progressClick = (e) => {\r\n    const rect = progressBar.current.getBoundingClientRect();\r\n    const barWidth = progressBar.current.clientWidth - progressBtnWidth;\r\n    const offset = Math.min(e.pageX - rect.left, barWidth);\r\n    setProgressOffset(offset);\r\n    changePercent();\r\n  };\r\n\r\n  const changePercent = () => {\r\n    const barWidth = progressBar.current.clientWidth - progressBtnWidth;\r\n    const curPercent = progress.current.clientWidth / barWidth;\r\n    percentChange(curPercent);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (percent >= 0 && percent <= 1 && !touch.initiated) {\r\n      const barWidth = progressBar.current.clientWidth - progressBtnWidth;\r\n      const offsetWidth = percent * barWidth;\r\n      progress.current.style.width = `${offsetWidth}px`;\r\n      progressBtn.current.style[\r\n        \"transform\"\r\n      ] = `translate3d(${offsetWidth}px, 0, 0)`;\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [percent]);\r\n\r\n  return (\r\n    <ProgressBarWrapper>\r\n      <div className=\"bar-inner\" ref={progressBar} onClick={progressClick}>\r\n        <div className=\"progress\" ref={progress}></div>\r\n        <div\r\n          className=\"progress-btn-wrapper\"\r\n          ref={progressBtn}\r\n          onTouchStart={progressTouchStart}\r\n          onTouchMove={progressTouchMove}\r\n          onTouchEnd={progressTouchEnd}\r\n        >\r\n          <div className=\"progress-btn\"></div>\r\n        </div>\r\n      </div>\r\n    </ProgressBarWrapper>\r\n  );\r\n};\r\n\r\nexport default React.memo(ProgressBar);\r\n","import React, { useRef } from \"react\";\r\nimport { getName, formatPlayTime } from \"../../../api/utils\";\r\nimport {\r\n  NormalPlayerContainer,\r\n  Top,\r\n  Middle,\r\n  Bottom,\r\n  Operators,\r\n  CDWrapper,\r\n  ProgressWrapper,\r\n} from \"./style\";\r\nimport { usePlayer } from \"../store/model\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport animations from \"create-keyframe-animation\";\r\nimport ProgressBar from \"../../../baseUI/ProgressBar\";\r\n\r\nconst NormalPlayer = (props) => {\r\n  const {\r\n    playing,\r\n    song,\r\n    currentTime,\r\n    duration,\r\n    percent,\r\n    clickPlay,\r\n    onProgressChange,\r\n    handlePrev,\r\n    handleNext,\r\n  } = props;\r\n\r\n  const { fullScreen, toggleFullScreen, toggleShowPlayList } = usePlayer();\r\n\r\n  const normalPlayerRef = useRef();\r\n  const cdWrapperRef = useRef();\r\n\r\n  const _getPosAndScale = () => {\r\n    const targetWidth = 40;\r\n    const paddingLeft = 40;\r\n    const paddingBottom = 30;\r\n    const paddingTop = 80;\r\n    const width = window.innerWidth * 0.8;\r\n    const scale = targetWidth / width;\r\n    // 两个圆心的横坐标距离和纵坐标距离\r\n    const x = -(window.innerWidth / 2 - paddingLeft);\r\n    const y = window.innerHeight - paddingTop - width / 2 - paddingBottom;\r\n    return {\r\n      x,\r\n      y,\r\n      scale,\r\n    };\r\n  };\r\n\r\n  const enter = () => {\r\n    normalPlayerRef.current.style.display = \"block\";\r\n    const { x, y, scale } = _getPosAndScale();\r\n    let animation = {\r\n      0: {\r\n        transform: `translate3d(${x}px,${y}px,0) scale(${scale})`,\r\n      },\r\n      60: {\r\n        transform: `translate3d(0, 0, 0) scale(1.1)`,\r\n      },\r\n      100: {\r\n        transform: `translate3d(0, 0, 0) scale(1)`,\r\n      },\r\n    };\r\n    animations.registerAnimation({\r\n      name: \"move\",\r\n      animation,\r\n      presets: {\r\n        duration: 400,\r\n        easing: \"linear\",\r\n      },\r\n    });\r\n    animations.runAnimation(cdWrapperRef.current, \"move\");\r\n  };\r\n\r\n  const afterEnter = () => {\r\n    const cdWrapperDom = cdWrapperRef.current;\r\n    animations.unregisterAnimation(\"move\");\r\n    cdWrapperDom.style.animation = \"\";\r\n  };\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={fullScreen}\r\n      classNames=\"normal\"\r\n      timeout={400}\r\n      mountOnEnter\r\n      onEnter={enter}\r\n      onEntered={afterEnter}\r\n      onExited={() => {\r\n        normalPlayerRef.current.style.display = \"none\";\r\n      }}\r\n    >\r\n      <NormalPlayerContainer ref={normalPlayerRef}>\r\n        <div className=\"background\">\r\n          <img\r\n            src={song.al.picUrl + \"?param=300x300\"}\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            alt=\"歌曲图片\"\r\n          />\r\n        </div>\r\n        <div className=\"background layer\"></div>\r\n        <Top className=\"top\">\r\n          <div\r\n            className=\"back\"\r\n            onClick={() => {\r\n              toggleFullScreen(false);\r\n            }}\r\n          >\r\n            <i className=\"fa fa-arrow-down\"></i>\r\n          </div>\r\n          <h1 className=\"title\">{song.name}</h1>\r\n          <h1 className=\"subtitle\">{getName(song.ar)}</h1>\r\n        </Top>\r\n        <Middle ref={cdWrapperRef}>\r\n          <CDWrapper>\r\n            <div className=\"cd\">\r\n              <img\r\n                className={`image play ${playing ? \"\" : \"pause\"}`}\r\n                src={song.al.picUrl + \"?param=400x400\"}\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n          </CDWrapper>\r\n        </Middle>\r\n        <Bottom className=\"bottom\">\r\n          <ProgressWrapper>\r\n            <span className=\"time time-l\">{formatPlayTime(currentTime)}</span>\r\n            <div className=\"progress-bar-wrapper\">\r\n              <ProgressBar\r\n                percent={percent}\r\n                percentChange={onProgressChange}\r\n              ></ProgressBar>\r\n            </div>\r\n            <span className=\"time time-r\">{formatPlayTime(duration)}</span>\r\n          </ProgressWrapper>\r\n          <Operators>\r\n            <div className=\"icon i-left\">\r\n              <i className=\"fas fa-sync-alt\" aria-hidden=\"true\"></i>\r\n            </div>\r\n            <div className=\"icon i-left\">\r\n              <i className=\"fas fa-step-backward\" onClick={handlePrev}></i>\r\n            </div>\r\n            <div className=\"icon i-center\">\r\n              {playing ? (\r\n                <i\r\n                  className=\"fas fa-pause-circle\"\r\n                  onClick={(e) => clickPlay(e, false)}\r\n                ></i>\r\n              ) : (\r\n                <i\r\n                  className=\"fas fa-play-circle\"\r\n                  onClick={(e) => clickPlay(e, true)}\r\n                ></i>\r\n              )}\r\n            </div>\r\n            <div className=\"icon i-right\">\r\n              <i className=\"fas fa-step-forward\" onClick={handleNext}></i>\r\n            </div>\r\n            <div\r\n              className=\"icon i-right\"\r\n              onClick={() => {\r\n                toggleShowPlayList(true);\r\n              }}\r\n            >\r\n              <i className=\"fa fa-music\"></i>\r\n            </div>\r\n          </Operators>\r\n        </Bottom>\r\n      </NormalPlayerContainer>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nexport default React.memo(NormalPlayer);\r\n","import styled from \"styled-components\";\r\nimport style from \"../../../assets/global-style\";\r\n\r\nexport const PlayListWrapper = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  background-color: ${style[\"background-color-shadow\"]};\r\n  &.list-fade-enter {\r\n    opacity: 0;\r\n  }\r\n  &.list-fade-enter-active {\r\n    opacity: 1;\r\n    transition: all 0.3s;\r\n  }\r\n  &.list-fade-exit {\r\n    opacity: 1;\r\n  }\r\n  &.list-fade-exit-active {\r\n    opacity: 0;\r\n    transition: all 0.3s;\r\n  }\r\n  .list_wrapper {\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    opacity: 1;\r\n    border-radius: 10px 10px 0 0;\r\n    background-color: ${style[\"highlight-background-color\"]};\r\n    transform: translate3d(0, 0, 0);\r\n    .list_close {\r\n      text-align: center;\r\n      line-height: 50px;\r\n      background: ${style[\"background-color\"]};\r\n      font-size: ${style[\"font-size-l\"]};\r\n      color: ${style[\"font-color-desc\"]};\r\n    }\r\n  }\r\n`;\r\nexport const ScrollWrapper = styled.div`\r\n  height: 400px;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const ListContent = styled.div`\r\n  .item {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 40px;\r\n    padding: 0 30px 0 20px;\r\n    overflow: hidden;\r\n    .current {\r\n      flex: 0 0 20px;\r\n      width: 20px;\r\n      font-size: ${style[\"font-size-s\"]};\r\n      color: ${style[\"theme-color\"]};\r\n    }\r\n    .text {\r\n      flex: 1;\r\n      ${style.noWrap()}\r\n      font-size: ${style[\"font-size-m\"]};\r\n      color: ${style[\"font-color-desc-v2\"]};\r\n      .icon-favorite {\r\n        color: ${style[\"theme-color\"]};\r\n      }\r\n    }\r\n    .like {\r\n      ${style.extendClick()}\r\n      font-size: ${style[\"font-size-m\"]};\r\n      color: ${style[\"theme-color\"]};\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nconst loading = keyframes`\r\n  0%, 100% {\r\n    transform: scale(0.0)\r\n  }\r\n  50% {\r\n    transform: scale(1.0)\r\n  }\r\n`;\r\n\r\nconst LoadingWrapper = styled.div`\r\n  > div {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    width: 60px;\r\n    height: 60px;\r\n    opacity: 0.6;\r\n    border-radius: 50%;\r\n    background-color: ${style[\"theme-color\"]};\r\n    animation: ${loading} 1.4s infinite ease-in;\r\n  }\r\n  > div:nth-child(2) {\r\n    animation-delay: -0.7s;\r\n  }\r\n`;\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <LoadingWrapper>\r\n      <div></div>\r\n      <div></div>\r\n    </LoadingWrapper>\r\n  );\r\n};\r\n\r\nexport default React.memo(Loading);\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nconst dance = keyframes`\r\n    0%, 40%, 100%{\r\n      transform: scaleY (0.4);\r\n      transform-origin: center 100%;\r\n    }\r\n    20%{\r\n      transform: scaleY (1);\r\n    }\r\n`;\r\nconst Loading = styled.div`\r\n  height: 10px;\r\n  width: 100%;\r\n  margin: auto;\r\n  text-align: center;\r\n  font-size: 10px;\r\n  > div {\r\n    display: inline-block;\r\n    background-color: ${style[\"theme-color\"]};\r\n    height: 100%;\r\n    width: 1px;\r\n    margin-right: 2px;\r\n    animation: ${dance} 1s infinite;\r\n  }\r\n  > div:nth-child (2) {\r\n    animation-delay: -0.4s;\r\n  }\r\n  > div:nth-child (3) {\r\n    animation-delay: -0.6s;\r\n  }\r\n  > div:nth-child (4) {\r\n    animation-delay: -0.5s;\r\n  }\r\n  > div:nth-child (5) {\r\n    animation-delay: -0.2s;\r\n  }\r\n`;\r\n\r\nfunction LoadingV2() {\r\n  return (\r\n    <Loading>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <span> 拼命加载中...</span>\r\n    </Loading>\r\n  );\r\n}\r\n\r\nexport default React.memo(LoadingV2);\r\n","import React, {\r\n  forwardRef,\r\n  useState,\r\n  useMemo,\r\n  useEffect,\r\n  useRef,\r\n  useImperativeHandle,\r\n} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport BetterScroll from \"better-scroll\";\r\nimport styled from \"styled-components\";\r\nimport { debounce } from \"../../api/utils\";\r\nimport Loading from \"../Loading\";\r\nimport Loading2 from \"../LoadingV2\";\r\n\r\nconst ScrollContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst PullUpLoading = styled.div`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 5px;\r\n  width: 60px;\r\n  height: 60px;\r\n  margin: auto;\r\n  z-index: 100;\r\n`;\r\n\r\nexport const PullDownLoading = styled.div`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0px;\r\n  height: 30px;\r\n  margin: auto;\r\n  z-index: 100;\r\n`;\r\n\r\nconst Scroll = forwardRef((props, ref) => {\r\n  const [betterScroll, setBetterScroll] = useState(null);\r\n\r\n  const scrollContainerRef = useRef();\r\n\r\n  const {\r\n    direction,\r\n    click,\r\n    refresh,\r\n    pullUpLoading,\r\n    pullDownLoading,\r\n    bounceTop,\r\n    bounceBottom,\r\n  } = props;\r\n\r\n  const { pullUp, pullDown, onScroll } = props;\r\n\r\n  let pullUpDebounce = useMemo(() => {\r\n    return debounce(pullUp, 500);\r\n  }, [pullUp]);\r\n\r\n  let pullDownDebounce = useMemo(() => {\r\n    return debounce(pullDown, 500);\r\n  }, [pullDown]);\r\n\r\n  useEffect(() => {\r\n    const scroll = new BetterScroll(scrollContainerRef.current, {\r\n      scrollX: direction === \"horizontal\",\r\n      scrollY: direction === \"vertical\",\r\n      probeType: 3,\r\n      click: click,\r\n      bounce: {\r\n        top: bounceTop,\r\n        bottom: bounceBottom,\r\n      },\r\n    });\r\n    setBetterScroll(scroll);\r\n    return () => {\r\n      setBetterScroll(null);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!betterScroll || !onScroll) {\r\n      return;\r\n    }\r\n    betterScroll.on(\"scroll\", onScroll);\r\n    return () => {\r\n      betterScroll.off(\"scroll\", onScroll);\r\n    };\r\n  }, [onScroll, betterScroll]);\r\n\r\n  useEffect(() => {\r\n    if (!betterScroll || !pullUp) {\r\n      return;\r\n    }\r\n    const handlePullUp = () => {\r\n      if (betterScroll.y < betterScroll.maxScrollY + 100) {\r\n        pullUpDebounce();\r\n      }\r\n    };\r\n    betterScroll.on(\"scrollEnd\", handlePullUp);\r\n    return () => {\r\n      betterScroll.off(\"scrollEnd\", handlePullUp);\r\n    };\r\n  }, [betterScroll, pullUpDebounce, pullUp]);\r\n\r\n  useEffect(() => {\r\n    if (!betterScroll || !pullDown) {\r\n      return;\r\n    }\r\n    const HandlePullDown = (pos) => {\r\n      if (pos.y > 50) {\r\n        pullDownDebounce();\r\n      }\r\n    };\r\n    betterScroll.on(\"touchEnd\", HandlePullDown);\r\n    return () => {\r\n      betterScroll.off(\"touchEnd\", HandlePullDown);\r\n    };\r\n  }, [betterScroll, pullDownDebounce, pullDown]);\r\n\r\n  useEffect(() => {\r\n    if (refresh && betterScroll) {\r\n      betterScroll.refresh();\r\n    }\r\n  });\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    refresh() {\r\n      if (betterScroll) {\r\n        betterScroll.refresh();\r\n        betterScroll.scrollTo(0, 0);\r\n      }\r\n    },\r\n    getBScroll() {\r\n      if (betterScroll) {\r\n        return betterScroll;\r\n      }\r\n    },\r\n  }));\r\n\r\n  const PullUpdisplayStyle = pullUpLoading\r\n    ? { display: \"\" }\r\n    : { display: \"none\" };\r\n  const PullDowndisplayStyle = pullDownLoading\r\n    ? { display: \"\" }\r\n    : { display: \"none\" };\r\n  return (\r\n    <ScrollContainer ref={scrollContainerRef}>\r\n      {props.children}\r\n      {/* 滑到底部加载动画 */}\r\n      <PullUpLoading style={PullUpdisplayStyle}>\r\n        <Loading></Loading>\r\n      </PullUpLoading>\r\n      {/* 顶部下拉刷新动画 */}\r\n      <PullDownLoading style={PullDowndisplayStyle}>\r\n        <Loading2></Loading2>\r\n      </PullDownLoading>\r\n    </ScrollContainer>\r\n  );\r\n});\r\n\r\nScroll.defaultProps = {\r\n  direction: \"vertical\",\r\n  click: true,\r\n  refresh: true,\r\n  onScroll: null,\r\n  pullUpLoading: false,\r\n  pullDownLoading: false,\r\n  pullUp: null,\r\n  pullDown: null,\r\n  bounceTop: true,\r\n  bounceBottom: true,\r\n};\r\n\r\nScroll.propTypes = {\r\n  direction: PropTypes.oneOf([\"vertical\", \"horizontal\"]),\r\n  refresh: PropTypes.bool,\r\n  onScroll: PropTypes.func,\r\n  pullUp: PropTypes.func,\r\n  pullDown: PropTypes.func,\r\n  pullUpLoading: PropTypes.bool,\r\n  pullDownLoading: PropTypes.bool,\r\n  bounceTop: PropTypes.bool, //是否支持向上吸顶\r\n  bounceBottom: PropTypes.bool, //是否支持向下吸顶\r\n};\r\n\r\nexport default Scroll;\r\n","import React, { useRef, useCallback, useState } from \"react\";\r\nimport { PlayListWrapper, ScrollWrapper, ListContent } from \"./style\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport Scroll from \"../../../baseUI/Scroll\";\r\nimport { getName } from \"../../../api/utils\";\r\nimport { usePlayer } from \"../store/model\";\r\n\r\nconst PlayList = () => {\r\n  const [isShow, setIsShow] = useState(false);\r\n\r\n  const {\r\n    currentSong,\r\n    playList,\r\n    currentIndex,\r\n    showPlayList,\r\n    toggleShowPlayList,\r\n    changeCurrentPlayListIndex,\r\n  } = usePlayer();\r\n\r\n  const playListRef = useRef();\r\n  const listWrapperRef = useRef();\r\n\r\n  const onEnter = useCallback(() => {\r\n    setIsShow(true);\r\n    listWrapperRef.current.style[\"transform\"] = `translate3d(0, 100%, 0)`;\r\n  }, []);\r\n\r\n  const onEntering = useCallback(() => {\r\n    // 让列表展现\r\n    listWrapperRef.current.style[\"transition\"] = \"all 0.3s\";\r\n    listWrapperRef.current.style[\"transform\"] = `translate3d(0, 0, 0)`;\r\n  }, []);\r\n\r\n  const onExiting = useCallback(() => {\r\n    listWrapperRef.current.style[\"transition\"] = \"all 0.3s\";\r\n    listWrapperRef.current.style[\"transform\"] = `translate3d(0px, 100%, 0px)`;\r\n  }, []);\r\n\r\n  const onExited = useCallback(() => {\r\n    setIsShow(false);\r\n    listWrapperRef.current.style[\"transform\"] = `translate3d(0px, 100%, 0px)`;\r\n  }, []);\r\n\r\n  const getCurrentIcon = (item) => {\r\n    // 是不是当前正在播放的歌曲\r\n    const current = currentSong.id === item.id;\r\n    const className = current ? \"fa fa-music\" : \"\";\r\n    return <i className={`current ${className}`}></i>;\r\n  };\r\n\r\n  const handleChangeCurrentIndex = (index) => {\r\n    if (currentIndex === index) return;\r\n    changeCurrentPlayListIndex(index);\r\n  };\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={showPlayList}\r\n      timeout={300}\r\n      classNames=\"list-fade\"\r\n      mountOnEnter\r\n      onEnter={onEnter}\r\n      onEntering={onEntering}\r\n      onExiting={onExiting}\r\n      onExited={onExited}\r\n    >\r\n      <PlayListWrapper\r\n        ref={playListRef}\r\n        onClick={() => toggleShowPlayList(false)}\r\n        style={isShow === true ? { display: \"block\" } : { display: \"none\" }}\r\n      >\r\n        <div\r\n          className=\"list_wrapper\"\r\n          ref={listWrapperRef}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <ScrollWrapper>\r\n            <Scroll>\r\n              <ListContent>\r\n                {playList.map((item, index) => {\r\n                  return (\r\n                    <li\r\n                      className=\"item\"\r\n                      key={item.id}\r\n                      onClick={() => {\r\n                        handleChangeCurrentIndex(index);\r\n                      }}\r\n                    >\r\n                      {getCurrentIcon(item)}\r\n                      <span className=\"text\">\r\n                        {item.name} - {getName(item.ar)}\r\n                      </span>\r\n                      <span className=\"like\">\r\n                        <i className=\"fa fa-heart\"></i>\r\n                      </span>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ListContent>\r\n            </Scroll>\r\n          </ScrollWrapper>\r\n        </div>\r\n      </PlayListWrapper>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nexport default React.memo(PlayList);\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport MiniPlayer from \"./miniPlayer\";\r\nimport NormalPlayer from \"./normalPlayer\";\r\nimport PlayList from \"./playList\";\r\nimport { usePlayer } from \"./store/model\";\r\nimport { isEmptyObject, getSongUrl } from \"../../api/utils\";\r\n\r\nconst Player = (props) => {\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [presetSong, setPresetSong] = useState({});\r\n\r\n  const audioRef = useRef();\r\n  const songReady = useRef(true);\r\n\r\n  let percent = isNaN(currentTime / duration) ? 0 : currentTime / duration;\r\n\r\n  const {\r\n    playing,\r\n    currentSong,\r\n    currentIndex,\r\n    playList,\r\n    togglePlaying,\r\n    changeCurrentSongData,\r\n    changeCurrentPlayListIndex,\r\n  } = usePlayer();\r\n\r\n  const initAudioPlay = async () => {\r\n    if (\r\n      !playList.length ||\r\n      currentIndex === -1 ||\r\n      !playList[currentIndex] ||\r\n      playList[currentIndex].id === presetSong.id ||\r\n      !songReady.current\r\n    ) {\r\n      return;\r\n    }\r\n    let current = playList[currentIndex];\r\n    changeCurrentSongData(current);\r\n    setPresetSong(current);\r\n    songReady.current = false;\r\n    audioRef.current.src = await getSongUrl(current.id);\r\n    audioRef.current.autoplay = true;\r\n    setTimeout(() => {\r\n      audioRef.current.play().then(() => {\r\n        songReady.current = true;\r\n      });\r\n    });\r\n    togglePlaying(true);\r\n    setCurrentTime(0);\r\n    setDuration((current.dt / 1000) | 0);\r\n  };\r\n\r\n  const togglePlayingState = (e, data) => {\r\n    e.stopPropagation();\r\n    togglePlaying(data);\r\n  };\r\n\r\n  const updateTime = (e) => {\r\n    setCurrentTime(e.target.currentTime);\r\n  };\r\n\r\n  const onProgressChange = (curPercent) => {\r\n    const newTime = curPercent * duration;\r\n    setCurrentTime(newTime);\r\n    audioRef.current.currentTime = newTime;\r\n    if (!playing) {\r\n      togglePlaying(true);\r\n    }\r\n  };\r\n\r\n  // 一首歌循环\r\n  const handleLoop = () => {\r\n    audioRef.current.currentTime = 0;\r\n    togglePlaying(true);\r\n    audioRef.current.play();\r\n  };\r\n\r\n  const handlePrev = () => {\r\n    console.log(currentIndex);\r\n    if (playList.length === 1) {\r\n      handleLoop();\r\n      return;\r\n    }\r\n    let index = currentIndex - 1;\r\n    if (index < 0) {\r\n      index = playList.length - 1;\r\n    }\r\n    changeCurrentPlayListIndex(index);\r\n    if (!playing) {\r\n      togglePlaying(true);\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (playList.length === 1) {\r\n      handleLoop();\r\n      return;\r\n    }\r\n    let index = currentIndex + 1;\r\n    if (index === playList.length) {\r\n      index = 0;\r\n    }\r\n    changeCurrentPlayListIndex(index);\r\n    if (!playing) {\r\n      togglePlaying(true);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    initAudioPlay();\r\n  }, [playList, currentIndex]);\r\n\r\n  useEffect(() => {\r\n    playing ? audioRef.current.play() : audioRef.current.pause();\r\n  }, [playing]);\r\n\r\n  return (\r\n    <div>\r\n      {!isEmptyObject(currentSong) ? (\r\n        <NormalPlayer\r\n          playing={playing}\r\n          song={currentSong}\r\n          percent={percent}\r\n          clickPlay={togglePlayingState}\r\n          onProgressChange={onProgressChange}\r\n          currentTime={currentTime}\r\n          duration={duration}\r\n          handlePrev={handlePrev}\r\n          handleNext={handleNext}\r\n        ></NormalPlayer>\r\n      ) : null}\r\n      {!isEmptyObject(currentSong) ? (\r\n        <MiniPlayer\r\n          playing={playing}\r\n          song={currentSong}\r\n          duration={duration}\r\n          currentTime={currentTime}\r\n          percent={percent}\r\n          clickPlay={togglePlayingState}\r\n        ></MiniPlayer>\r\n      ) : null}\r\n      <audio ref={audioRef} onTimeUpdate={updateTime}></audio>\r\n      <PlayList></PlayList>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Player);\r\n","import React from \"react\";\r\nimport { renderRoutes } from \"react-router-config\";\r\nimport { Top, Tab, TabItem } from \"./style\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Player from \"../Player\";\r\n\r\nfunction Home(props) {\r\n  const { route } = props;\r\n\r\n  const paths = [\r\n    {\r\n      path: \"/recommend\",\r\n      title: \"Recommend\",\r\n    },\r\n    {\r\n      path: \"/singers\",\r\n      title: \"Singers\",\r\n    },\r\n    {\r\n      path: \"/rank\",\r\n      title: \"Rank\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Top>\r\n        <span>\r\n          <i className=\"fa fa-bars\"></i>\r\n        </span>\r\n        <span className=\"title\"></span>\r\n        <span>\r\n          <i className=\"fa fa-search\"></i>\r\n        </span>\r\n      </Top>\r\n      <Tab>\r\n        {paths.map((item) => (\r\n          <NavLink to={item.path} activeClassName=\"selected\" key={item.path}>\r\n            <TabItem>\r\n              <span>{item.title}</span>\r\n            </TabItem>\r\n          </NavLink>\r\n        ))}\r\n      </Tab>\r\n      {renderRoutes(route.routes)}\r\n      <Player></Player>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Home);\r\n","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const SliderContainer = styled.div`\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: auto;\r\n  background: white;\r\n  .before {\r\n    position: absolute;\r\n    top: -300px;\r\n    height: 400px;\r\n    width: 100%;\r\n    background: ${style[\"theme-color\"]};\r\n  }\r\n  .slider-container {\r\n    position: relative;\r\n    width: 98%;\r\n    height: 160px;\r\n    overflow: hidden;\r\n    margin: auto;\r\n    border-radius: 6px;\r\n    .slider-nav {\r\n      position: absolute;\r\n      display: block;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .swiper-pagination-bullet-active {\r\n      background: ${style[\"theme-color\"]};\r\n    }\r\n  }\r\n`;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"swiper/dist/css/swiper.css\";\r\nimport { SliderContainer } from \"./style\";\r\nimport Swiper from \"swiper\";\r\n\r\nconst Slider = (props) => {\r\n  const [sliderSwiper, setSliderSwiper] = useState(null);\r\n  const { bannerList } = props;\r\n\r\n  useEffect(() => {\r\n    if (bannerList.length && !sliderSwiper) {\r\n      const newSliderSwiper = new Swiper(\".slider-container\", {\r\n        loop: true,\r\n        autoplay: {\r\n          delay: 3000,\r\n          disableOnInteraction: false,\r\n        },\r\n        pagination: { el: \".swiper-pagination\" },\r\n      });\r\n      setSliderSwiper(newSliderSwiper);\r\n    }\r\n  }, [bannerList.length, sliderSwiper]);\r\n\r\n  return (\r\n    <SliderContainer>\r\n      <div className=\"before\"></div>\r\n      <div className=\"slider-container\">\r\n        <div className=\"swiper-wrapper\">\r\n          {bannerList.map((slider, index) => (\r\n            <div className=\"swiper-slide\" key={`${slider.imageUrl}+${index}`}>\r\n              <div className=\"slider-nav\">\r\n                <img\r\n                  src={slider.imageUrl}\r\n                  width=\"100%\"\r\n                  height=\"100%\"\r\n                  alt=\"推荐\"\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"swiper-pagination\"></div>\r\n      </div>\r\n    </SliderContainer>\r\n  );\r\n};\r\n\r\nexport default React.memo(Slider);\r\n","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const ListWrapper = styled.div`\r\n  max-width: 100%;\r\n  .title {\r\n    font-weight: 700;\r\n    padding-left: 6px;\r\n    font-size: 14px;\r\n    line-height: 60px;\r\n  }\r\n`;\r\nexport const List = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n`;\r\n\r\nexport const ListItem = styled.div`\r\n  position: relative;\r\n  width: 32%;\r\n\r\n  .img_wrapper {\r\n    .decorate {\r\n      position: absolute;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 35px;\r\n      border-radius: 3px;\r\n      background: linear-gradient\r\n        (hsla (0, 0%, 43%, 0.4), hsla (0, 0%, 100%, 0));\r\n    }\r\n    position: relative;\r\n    height: 0;\r\n    padding-bottom: 100%;\r\n    .play_count {\r\n      position: absolute;\r\n      right: 2px;\r\n      top: 2px;\r\n      font-size: ${style[\"font-size-s\"]};\r\n      line-height: 15px;\r\n      color: ${style[\"font-color-light\"]};\r\n      .play {\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    img {\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n      border-radius: 3px;\r\n    }\r\n  }\r\n  .desc {\r\n    overflow: hidden;\r\n    margin-top: 2px;\r\n    padding: 0 2px;\r\n    height: 50px;\r\n    text-align: left;\r\n    font-size: ${style[\"font-size-s\"]};\r\n    line-height: 1.4;\r\n    color: ${style[\"font-color-desc\"]};\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { ListWrapper, ListItem, List } from \"./style\";\r\nimport { getCount } from \"../../api/utils\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst RecommendList = (props) => {\r\n  const { recommendList } = props;\r\n\r\n  const enterDetail = (id) => {\r\n    props.history.push(`/recommend/${id}`);\r\n  };\r\n\r\n  return (\r\n    <ListWrapper>\r\n      <h1 className=\"title\">Recommend List</h1>\r\n      <List>\r\n        {recommendList.map((item, index) => (\r\n          <ListItem key={item.id + index} onClick={() => enterDetail(item.id)}>\r\n            <div className=\"img_wrapper\">\r\n              <div className=\"decorate\"></div>\r\n              <LazyLoad placeholder={<span>loading..</span>}>\r\n                <img\r\n                  src={`${item.picUrl}?param=300x300`}\r\n                  width=\"100%\"\r\n                  height=\"100%\"\r\n                  alt=\"music\"\r\n                />\r\n              </LazyLoad>\r\n              <div className=\"play_count\">\r\n                <i className=\"fa fa-headphones\"></i>\r\n                <span className=\"count\">{getCount(item.playCount)}</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"desc\">{item.name}</div>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </ListWrapper>\r\n  );\r\n};\r\n\r\nexport default withRouter(React.memo(RecommendList));\r\n","import axios from \"axios\";\r\n\r\nexport const baseUrl = \"http://localhost:3003\";\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: baseUrl,\r\n});\r\n\r\naxiosInstance.interceptors.response.use(\r\n  (res) => res.data,\r\n  (error) => {\r\n    console.log(error);\r\n  }\r\n);\r\n\r\nexport const categoryTypes = [\r\n  {\r\n    name: \"华语男\",\r\n    type: \"1\",\r\n    area: \"7\",\r\n    key: \"1-7\",\r\n  },\r\n  {\r\n    name: \"华语女\",\r\n    type: \"2\",\r\n    area: \"7\",\r\n    key: \"2-7\",\r\n  },\r\n  {\r\n    name: \"华语组合\",\r\n    type: \"3\",\r\n    area: \"7\",\r\n    key: \"3-7\",\r\n  },\r\n  {\r\n    name: \"欧美男\",\r\n    type: \"1\",\r\n    area: \"76\",\r\n    key: \"1-76\",\r\n  },\r\n  {\r\n    name: \"欧美女\",\r\n    type: \"2\",\r\n    area: \"76\",\r\n    key: \"2-76\",\r\n  },\r\n  {\r\n    name: \"欧美组合\",\r\n    type: \"3\",\r\n    area: \"76\",\r\n    key: \"3-76\",\r\n  },\r\n  {\r\n    name: \"日本男\",\r\n    type: \"1\",\r\n    area: \"8\",\r\n    key: \"1-8\",\r\n  },\r\n  {\r\n    name: \"日本女\",\r\n    type: \"2\",\r\n    area: \"8\",\r\n    key: \"2-8\",\r\n  },\r\n  {\r\n    name: \"日本组合\",\r\n    type: \"3\",\r\n    area: \"8\",\r\n    key: \"3-8\",\r\n  },\r\n  {\r\n    name: \"韩国男\",\r\n    type: \"1\",\r\n    area: \"16\",\r\n    key: \"1-16\",\r\n  },\r\n  {\r\n    name: \"韩国女\",\r\n    type: \"2\",\r\n    area: \"16\",\r\n    key: \"2-16\",\r\n  },\r\n  {\r\n    name: \"韩国组合\",\r\n    type: \"3\",\r\n    area: \"16\",\r\n    key: \"3-16\",\r\n  },\r\n  {\r\n    name: \"其他男歌手\",\r\n    type: \"1\",\r\n    area: \"0\",\r\n    key: \"1-0\",\r\n  },\r\n  {\r\n    name: \"其他女歌手\",\r\n    type: \"2\",\r\n    area: \"0\",\r\n    key: \"2-0\",\r\n  },\r\n  {\r\n    name: \"其他组合\",\r\n    type: \"3\",\r\n    area: \"0\",\r\n    key: \"3-0\",\r\n  },\r\n];\r\n\r\nexport const alphaTypes = [\r\n  {\r\n    type: \"A\",\r\n    name: \"A\",\r\n  },\r\n  {\r\n    type: \"B\",\r\n    name: \"B\",\r\n  },\r\n  {\r\n    type: \"C\",\r\n    name: \"C\",\r\n  },\r\n  {\r\n    type: \"D\",\r\n    name: \"D\",\r\n  },\r\n  {\r\n    type: \"E\",\r\n    name: \"E\",\r\n  },\r\n  {\r\n    type: \"F\",\r\n    name: \"F\",\r\n  },\r\n  {\r\n    type: \"G\",\r\n    name: \"G\",\r\n  },\r\n  {\r\n    type: \"H\",\r\n    name: \"H\",\r\n  },\r\n  {\r\n    type: \"I\",\r\n    name: \"I\",\r\n  },\r\n  {\r\n    type: \"J\",\r\n    name: \"J\",\r\n  },\r\n  {\r\n    type: \"K\",\r\n    name: \"K\",\r\n  },\r\n  {\r\n    type: \"L\",\r\n    name: \"L\",\r\n  },\r\n  {\r\n    type: \"M\",\r\n    name: \"M\",\r\n  },\r\n  {\r\n    type: \"N\",\r\n    name: \"N\",\r\n  },\r\n  {\r\n    type: \"O\",\r\n    name: \"O\",\r\n  },\r\n  {\r\n    type: \"P\",\r\n    name: \"P\",\r\n  },\r\n  {\r\n    type: \"Q\",\r\n    name: \"Q\",\r\n  },\r\n  {\r\n    type: \"R\",\r\n    name: \"R\",\r\n  },\r\n  {\r\n    type: \"S\",\r\n    name: \"S\",\r\n  },\r\n  {\r\n    type: \"T\",\r\n    name: \"T\",\r\n  },\r\n  {\r\n    type: \"U\",\r\n    name: \"U\",\r\n  },\r\n  {\r\n    type: \"V\",\r\n    name: \"V\",\r\n  },\r\n  {\r\n    type: \"W\",\r\n    name: \"W\",\r\n  },\r\n  {\r\n    type: \"X\",\r\n    name: \"X\",\r\n  },\r\n  {\r\n    type: \"Y\",\r\n    name: \"Y\",\r\n  },\r\n  {\r\n    type: \"Z\",\r\n    name: \"Z\",\r\n  },\r\n];\r\n\r\nexport const HEADER_HEIGHT = 45;\r\n\r\nexport const playMode = {\r\n  sequence: 0,\r\n  loop: 1,\r\n  random: 2,\r\n};\r\n\r\nexport { axiosInstance };\r\n","import { axiosInstance } from \"./config\";\r\n\r\nexport const getBannerRequest = () => {\r\n  return axiosInstance.get(\"/banner\");\r\n};\r\n\r\nexport const getRecommendListRequest = () => {\r\n  return axiosInstance.get(\"/personalized\");\r\n};\r\n\r\nexport const getHotSingerListRequest = (count) => {\r\n  return axiosInstance.get(`/top/artists?offset=${count}`);\r\n};\r\n\r\nexport const getSingerListRequest = (type, area, inital, pageCount) => {\r\n  return axiosInstance.get(\r\n    `/artist/list?type=${type}&area=${area}&initial=${inital}&offset=${pageCount}`\r\n  );\r\n};\r\n\r\nexport const getRankListRequest = () => {\r\n  return axiosInstance.get(\"/toplist/detail\");\r\n};\r\n\r\nexport const getAlbumDetailRequest = (id) => {\r\n  return axiosInstance.get(`/playlist/detail?id=${id}`);\r\n};\r\n\r\nexport const getSingerInfoRequest = (id) => {\r\n  return axiosInstance.get(`/artists?id=${id}`);\r\n};\r\n","import { useEffect, useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  getBannerRequest,\r\n  getRecommendListRequest,\r\n} from \"../../../api/request\";\r\nimport {\r\n  changeBannerList,\r\n  changeRecommendList,\r\n  changeEnterLoading,\r\n} from \"./actionCreator\";\r\n\r\nexport const useRecommend = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const bannerListJS =\r\n    useSelector((state) => state.getIn([\"recommend\", \"bannerList\"])).toJS() ||\r\n    [];\r\n  const recommendListJS =\r\n    useSelector((state) =>\r\n      state.getIn([\"recommend\", \"recommendList\"])\r\n    ).toJS() || [];\r\n  const enterLoading = useSelector((state) =>\r\n    state.getIn([\"recommend\", \"enterLoading\"])\r\n  );\r\n\r\n  const getBanners = useCallback(async () => {\r\n    const result = await getBannerRequest();\r\n    dispatch(changeBannerList(result.banners));\r\n  }, []);\r\n\r\n  const getRecommends = useCallback(async () => {\r\n    const result = await getRecommendListRequest();\r\n    dispatch(changeRecommendList(result.result));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!bannerListJS.length || !recommendListJS.length) {\r\n      getBanners();\r\n      getRecommends();\r\n      dispatch(changeEnterLoading(false));\r\n    }\r\n  }, [getBanners, getRecommends]);\r\n\r\n  return { bannerListJS, recommendListJS, enterLoading };\r\n};\r\n","import * as actionTypes from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nexport const changeBannerList = (data) => ({\r\n  type: actionTypes.CHANGE_BANNER,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changeRecommendList = (data) => ({\r\n  type: actionTypes.CHANGE_RECOMMEND_LIST,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changeEnterLoading = (data) => ({\r\n  type: actionTypes.CHANGE_ENTER_LOADING,\r\n  data: fromJS(data),\r\n});\r\n","export const CHANGE_BANNER = \"recommend/CHANGE_BANNER\";\r\n\r\nexport const CHANGE_RECOMMEND_LIST = \"recommend/RECOMMEN_LIST\";\r\n\r\nexport const CHANGE_ENTER_LOADING = \"recommend/CHANGE_ENTER_LOADING\";\r\n","import React from \"react\";\r\nimport Slider from \"../../components/Slider\";\r\nimport RecommendList from \"../../components/List\";\r\nimport Scroll from \"../../baseUI/Scroll\";\r\nimport styled from \"styled-components\";\r\nimport { useRecommend } from \"./store/model\";\r\nimport { forceCheck } from \"react-lazyload\";\r\nimport Loading from \"../../baseUI/Loading\";\r\nimport { renderRoutes } from \"react-router-config\";\r\nimport { usePlayer } from \"../Player/store/model\";\r\n\r\nconst Content = styled.div`\r\n  position: fixed;\r\n  top: 90px;\r\n  bottom: ${(props) => (props.playCount > 0 ? \"60px\" : \"0px\")};\r\n  width: 100%;\r\n`;\r\n\r\nconst Recommend = (props) => {\r\n  const { bannerListJS, recommendListJS, enterLoading } = useRecommend();\r\n\r\n  const { playCount } = usePlayer();\r\n\r\n  return (\r\n    <Content playCount={playCount}>\r\n      {enterLoading ? (\r\n        <Loading></Loading>\r\n      ) : (\r\n        <Scroll onScroll={forceCheck}>\r\n          <div>\r\n            <Slider bannerList={bannerListJS}></Slider>\r\n            <RecommendList recommendList={recommendListJS}></RecommendList>\r\n          </div>\r\n        </Scroll>\r\n      )}\r\n      {renderRoutes(props.route.routes)}\r\n    </Content>\r\n  );\r\n};\r\n\r\nexport default React.memo(Recommend);\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Scroll from \"../Scroll\";\r\nimport { PropTypes } from \"prop-types\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nconst List = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 30px;\r\n  overflow: hidden;\r\n  > span:first-of-type {\r\n    display: block;\r\n    flex: 0 0 auto;\r\n    padding: 5px 0;\r\n    margin-right: 5px;\r\n    color: grey;\r\n    font-size: ${style[\"font-size-m\"]};\r\n    vertical-align: middle;\r\n  }\r\n`;\r\nconst ListItem = styled.span`\r\n  flex: 0 0 auto;\r\n  font-size: ${style[\"font-size-m\"]};\r\n  padding: 5px 8px;\r\n  border-radius: 10px;\r\n  &.selected {\r\n    color: ${style[\"theme-color\"]};\r\n    border: 1px solid ${style[\"theme-color\"]};\r\n    opacity: 0.8;\r\n  }\r\n`;\r\n\r\nconst Horizon = (props) => {\r\n  const { horizonType } = props;\r\n  const { list, oldVal, title } = props;\r\n  const { handleClick } = props;\r\n\r\n  const Category = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const CategoryDom = Category.current;\r\n    const tagElms = CategoryDom.querySelectorAll(\"span\");\r\n    let totalWidth = 0;\r\n    Array.from(tagElms).forEach((tag) => {\r\n      totalWidth += tag.offsetWidth;\r\n    });\r\n    CategoryDom.style.width = `${totalWidth}px`;\r\n  }, []);\r\n\r\n  return (\r\n    <Scroll direction=\"horizontal\">\r\n      <div ref={Category}>\r\n        <List>\r\n          <span>{title}</span>\r\n          {horizonType === \"area\"\r\n            ? list.map((item) => (\r\n                <ListItem\r\n                  className={`${\r\n                    oldVal.type === item.type && oldVal.area === item.area\r\n                      ? \"selected\"\r\n                      : \"\"\r\n                  }`}\r\n                  key={item.key}\r\n                  onClick={() =>\r\n                    handleClick({ type: item.type, area: item.area })\r\n                  }\r\n                >\r\n                  {item.name}\r\n                </ListItem>\r\n              ))\r\n            : list.map((item) => (\r\n                <ListItem\r\n                  className={`${oldVal === item.type ? \"selected\" : \"\"}`}\r\n                  key={item.type}\r\n                  onClick={() => handleClick(item.type)}\r\n                >\r\n                  {item.name}\r\n                </ListItem>\r\n              ))}\r\n        </List>\r\n      </div>\r\n    </Scroll>\r\n  );\r\n};\r\n\r\nHorizon.defaultProps = {\r\n  list: [],\r\n  oldVal: { type: \"\", area: \"\" },\r\n  title: \"\",\r\n  handleClick: null,\r\n};\r\n\r\nHorizon.propTypes = {\r\n  list: PropTypes.array,\r\n  oldVal: PropTypes.any,\r\n  title: PropTypes.string,\r\n  handleClick: PropTypes.func,\r\n};\r\n\r\nexport default Horizon;\r\n","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const NavContainer = styled.div`\r\n  box-sizing: border-box;\r\n  position: fixed;\r\n  top: 95px;\r\n  width: 100%;\r\n  padding: 5px;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const ListContainer = styled.div`\r\n  position: fixed;\r\n  top: 160px;\r\n  left: 0;\r\n  bottom: ${(props) => (props.playCount > 0 ? \"60px\" : \"0\")};\r\n  overflow: hidden;\r\n  width: 100%;\r\n`;\r\n\r\nexport const List = styled.div`\r\n  display: flex;\r\n  margin: auto;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  .title {\r\n    margin: 10px 0 10px 10px;\r\n    color: ${style[\"font-color-desc\"]};\r\n    font-size: ${style[\"font-size-s\"]};\r\n  }\r\n`;\r\nexport const ListItem = styled.div`\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin: 0 5px;\r\n  padding: 5px 0;\r\n  align-items: center;\r\n  border-bottom: 1px solid ${style[\"border-color\"]};\r\n  .img_wrapper {\r\n    margin-right: 20px;\r\n    img {\r\n      border-radius: 3px;\r\n      width: 50px;\r\n      height: 50px;\r\n    }\r\n  }\r\n  .name {\r\n    font-size: ${style[\"font-size-m\"]};\r\n    color: ${style[\"font-color-desc\"]};\r\n    font-weight: 500;\r\n  }\r\n`;\r\n\r\nexport const EnterLoading = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 100px;\r\n  height: 100px;\r\n  margin: auto;\r\n`;\r\n","import * as actionTypes from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nexport const changeSingerList = (data) => ({\r\n  type: actionTypes.CHANGE_SINGER_LIST,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changePageCount = (data) => ({\r\n  type: actionTypes.CHANGE_PAGE_COUNT,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changeEnterLoading = (data) => ({\r\n  type: actionTypes.CHANGE_ENTER_LOADING,\r\n  data: data,\r\n});\r\n\r\nexport const changePullUpLoading = (data) => ({\r\n  type: actionTypes.CHANGE_PULLUP_LOADING,\r\n  data: data,\r\n});\r\n\r\nexport const changePullDownLoading = (data) => ({\r\n  type: actionTypes.CHANGE_PULLDOWN_LOADING,\r\n  data: data,\r\n});\r\n","export const CHANGE_SINGER_LIST = \"singers/CHANGE_SINGER_LIST\";\r\nexport const CHANGE_PAGE_COUNT = \"singers/PAGE_COUNT\";\r\nexport const CHANGE_ENTER_LOADING = \"singers/ENTER_LOADING\";\r\nexport const CHANGE_PULLUP_LOADING = \"singers/PULLUP_LOADING\";\r\nexport const CHANGE_PULLDOWN_LOADING = \"singers/PULLDOWN_LOADING\";\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport {\r\n  getHotSingerListRequest,\r\n  getSingerListRequest,\r\n} from \"../../../api/request\";\r\nimport {\r\n  changeSingerList,\r\n  changePullDownLoading,\r\n  changePageCount,\r\n  changePullUpLoading,\r\n} from \"./actionCreators\";\r\n\r\nexport const useHotSingerList = (hot, { type, area }, inital) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const singerList =\r\n    useSelector((state) => state.getIn([\"singers\", \"singerList\"])).toJS() || [];\r\n\r\n  const pageCount = useSelector((state) =>\r\n    state.getIn([\"singers\", \"pageCount\"])\r\n  );\r\n\r\n  const pullUpLoading = useSelector((state) =>\r\n    state.getIn([\"singers\", \"pullUpLoading\"])\r\n  );\r\n\r\n  const pullDownLoading = useSelector((state) =>\r\n    state.getIn([\"singers\", \"pullDownLoading\"])\r\n  );\r\n\r\n  function changePage(count) {\r\n    dispatch(changePageCount(count));\r\n  }\r\n\r\n  function pullUpRefreshDispatch() {\r\n    dispatch(changePullUpLoading(true));\r\n    changePage(pageCount + 1);\r\n  }\r\n\r\n  function pullDownRefreshDishpatch() {\r\n    dispatch(changePullDownLoading(true));\r\n    changePage(0);\r\n    dispatch(changePullDownLoading(false));\r\n  }\r\n\r\n  async function getHotSingers() {\r\n    const result = await getHotSingerListRequest(pageCount);\r\n    if (pullUpLoading) {\r\n      dispatch(changeSingerList([...singerList, ...result.artists]));\r\n    } else {\r\n      dispatch(changeSingerList(result.artists));\r\n    }\r\n    dispatch(changePullUpLoading(false));\r\n  }\r\n\r\n  async function getSingers() {\r\n    const result = await getSingerListRequest(type, area, inital, pageCount);\r\n    if (pullUpLoading) {\r\n      dispatch(changeSingerList([...singerList, ...result.artists]));\r\n    } else {\r\n      dispatch(changeSingerList(result.artists));\r\n    }\r\n    dispatch(changePullUpLoading(false));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (hot) {\r\n      getHotSingers();\r\n    } else {\r\n      getSingers();\r\n    }\r\n  }, [hot, pageCount, type, area, inital]);\r\n\r\n  return {\r\n    singerList,\r\n    pullUpLoading,\r\n    pullDownLoading,\r\n    changePage,\r\n    pullUpRefreshDispatch,\r\n    pullDownRefreshDishpatch,\r\n  };\r\n};\r\n","import React, { useState } from \"react\";\r\nimport Horizon from \"../../baseUI/HorizonItem\";\r\nimport { categoryTypes, alphaTypes } from \"../../api/config\";\r\nimport { NavContainer, ListContainer, ListItem, List } from \"./style\";\r\nimport Scroll from \"../../baseUI/Scroll\";\r\nimport { useHotSingerList } from \"./store/model\";\r\nimport { renderRoutes } from \"react-router-config\";\r\nimport { usePlayer } from \"../Player/store/model\";\r\n\r\nconst Singer = (props) => {\r\n  const [hot, setHot] = useState(\"hotSingers\");\r\n  const [category, setCategory] = useState({\r\n    type: \"\",\r\n    area: \"-1\",\r\n  });\r\n  const [alpha, setAlpha] = useState(\"\");\r\n\r\n  const { playCount } = usePlayer();\r\n\r\n  const handleUpdateCategory = (val) => {\r\n    if (hot) {\r\n      setHot(false);\r\n    }\r\n    changePage(0);\r\n    setCategory(val);\r\n  };\r\n\r\n  const handleUpdateAlpha = (val) => {\r\n    if (hot) {\r\n      setHot(false);\r\n    }\r\n    changePage(0);\r\n    setAlpha(val);\r\n  };\r\n\r\n  const {\r\n    singerList,\r\n    pullUpLoading,\r\n    pullDownLoading,\r\n    changePage,\r\n    pullUpRefreshDispatch,\r\n    pullDownRefreshDishpatch,\r\n  } = useHotSingerList(hot, category, alpha);\r\n\r\n  const enterDetail = (detial) => {\r\n    props.history.push(`/singers/${detial.id}`);\r\n  };\r\n\r\n  const renderSingerList = (singerList) => {\r\n    return (\r\n      <List>\r\n        {singerList.map((item, index) => (\r\n          <ListItem\r\n            key={`${item.accountId}-${index}`}\r\n            onClick={() => enterDetail(item)}\r\n          >\r\n            <div className=\"img_wrapper\">\r\n              <img\r\n                src={`${item.picUrl}?param=300x300`}\r\n                width=\"100%\"\r\n                height=\"100%\"\r\n                alt=\"music\"\r\n              />\r\n            </div>\r\n            <span className=\"name\">{item.name}</span>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <NavContainer>\r\n        <Horizon\r\n          horizonType={\"area\"}\r\n          list={categoryTypes}\r\n          title={\"Category(Default Hot):\"}\r\n          oldVal={category}\r\n          handleClick={(val) => handleUpdateCategory(val)}\r\n        ></Horizon>\r\n        <Horizon\r\n          horizonType={\"alpha\"}\r\n          list={alphaTypes}\r\n          title={\"First Letter\"}\r\n          oldVal={alpha}\r\n          handleClick={(val) => handleUpdateAlpha(val)}\r\n        ></Horizon>\r\n      </NavContainer>\r\n      <ListContainer playCount={playCount}>\r\n        <Scroll\r\n          pullUpLoading={pullUpLoading}\r\n          pullUp={pullUpRefreshDispatch}\r\n          pullDownLoading={pullDownLoading}\r\n          pullDown={pullDownRefreshDishpatch}\r\n        >\r\n          {renderSingerList(singerList)}\r\n        </Scroll>\r\n      </ListContainer>\r\n      {renderRoutes(props.route.routes)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Singer);\r\n","import { fromJS } from \"immutable\";\r\n\r\nexport const CHANGE_RANK_LIST = \"home/rank/CHANGE_RANK_LIST\";\r\nexport const CHANGE_LOADING = \"home/rank/CHANGE_LOADING\";\r\n\r\n// actionCreator\r\nexport const changeRankList = (data) => ({\r\n  type: CHANGE_RANK_LIST,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changeLoading = (data) => ({\r\n  type: CHANGE_LOADING,\r\n  data: data,\r\n});\r\n\r\nconst defaultState = fromJS({\r\n  rankList: [],\r\n  loading: true,\r\n});\r\n\r\nexport const reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case CHANGE_RANK_LIST:\r\n      return state.set(\"rankList\", action.data);\r\n    case CHANGE_LOADING:\r\n      return state.set(\"loading\", action.data);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getRankListRequest } from \"../../../api/request\";\r\nimport { changeRankList, changeLoading } from \".\";\r\n\r\nexport const useRank = () => {\r\n  const disPatch = useDispatch();\r\n\r\n  const rankList =\r\n    useSelector((state) => state.getIn([\"rank\", \"rankList\"])).toJS() || [];\r\n\r\n  const loading = useSelector((state) => state.getIn([\"rank\", \"loading\"]));\r\n\r\n  async function getRankList() {\r\n    try {\r\n      const result = await getRankListRequest();\r\n      disPatch(changeRankList(result.list));\r\n      disPatch(changeLoading(false));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getRankList();\r\n  }, []);\r\n\r\n  return {\r\n    rankList,\r\n    loading,\r\n  };\r\n};\r\n","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\n// Props中的globalRank和tracks.length均代表是否为全球榜\r\n\r\nexport const Container = styled.div`\r\n  position: fixed;\r\n  top: 90px;\r\n  bottom: ${(props) => (props.playCount > 0 ? \"60px\" : 0)};\r\n  width: 100%;\r\n  .official,\r\n  .global {\r\n    margin: 10px 5px;\r\n    padding-top: 15px;\r\n    font-weight: 700;\r\n    font-size: ${style[\"font-size-m\"]};\r\n    color: ${style[\"font-color-desc\"]};\r\n  }\r\n`;\r\n\r\nexport const List = styled.ul`\r\n  margin-top: 10px;\r\n  padding: 0 5px;\r\n  display: ${(props) => (props.globalRank ? \"flex\" : \"\")};\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n  background: ${style[\"background-color\"]};\r\n  &::after {\r\n    content: \"\";\r\n    display: block;\r\n    width: 32vw;\r\n  }\r\n`;\r\nexport const ListItem = styled.li`\r\n  display: ${(props) => (props.tracks.length ? \"flex\" : \"\")};\r\n  padding: 3px 0;\r\n  border-bottom: 1px solid ${style[\"border-color\"]};\r\n  .img_wrapper {\r\n    width: ${(props) => (props.tracks.length ? \"27vw\" : \"32vw\")};\r\n    height: ${(props) => (props.tracks.length ? \"27vw\" : \"32vw\")};\r\n    border-radius: 3px;\r\n    position: relative;\r\n    .decorate {\r\n      position: absolute;\r\n      bottom: 0;\r\n      width: 100%;\r\n      height: 35px;\r\n      border-radius: 3px;\r\n      background: linear-gradient(hsla(0, 0%, 100%, 0), hsla(0, 0%, 43%, 0.4));\r\n    }\r\n    img {\r\n      width: 100%;\r\n      height: 100%;\r\n      border-radius: 3px;\r\n    }\r\n    .update_frequecy {\r\n      position: absolute;\r\n      left: 7px;\r\n      bottom: 7px;\r\n      font-size: ${style[\"font-size-ss\"]};\r\n      color: ${style[\"font-color-light\"]};\r\n    }\r\n  }\r\n`;\r\nexport const SongList = styled.ul`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  padding: 10px 10px;\r\n  > li {\r\n    font-size: ${style[\"font-size-s\"]};\r\n    color: grey;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { useRank } from \"./store/model\";\r\nimport { filterIndex } from \"../../api/utils\";\r\nimport { Container, List, ListItem, SongList } from \"./style\";\r\nimport { EnterLoading } from \"../Singers/style\";\r\nimport Scroll from \"../../baseUI/Scroll\";\r\nimport Loading from \"../../baseUI/Loading\";\r\nimport { renderRoutes } from \"react-router-config\";\r\nimport { usePlayer } from \"../Player/store/model\";\r\n\r\nconst Rank = (props) => {\r\n  const { rankList, loading } = useRank();\r\n\r\n  const { playCount } = usePlayer();\r\n\r\n  const globalStartIndex = filterIndex(rankList);\r\n\r\n  const officialList = rankList.slice(0, globalStartIndex);\r\n\r\n  const globalList = rankList.slice(globalStartIndex);\r\n\r\n  const enterDetail = (detail) => {\r\n    props.history.push(`/rank/${detail.id}`);\r\n  };\r\n\r\n  const renderSongList = (list) => {\r\n    return list.length ? (\r\n      <SongList>\r\n        {list.map((item, index) => {\r\n          return (\r\n            <li key={index}>\r\n              {index + 1}. {item.first} - {item.second}\r\n            </li>\r\n          );\r\n        })}\r\n      </SongList>\r\n    ) : null;\r\n  };\r\n  const renderRankList = (list, global) => {\r\n    return (\r\n      <List globalRank={global}>\r\n        {list.map((item, index) => {\r\n          return (\r\n            <ListItem\r\n              key={`${item.coverImgId}${index}`}\r\n              tracks={item.tracks}\r\n              onClick={() => enterDetail(item)}\r\n            >\r\n              <div className=\"img_wrapper\">\r\n                <img src={item.coverImgUrl} alt=\"\" />\r\n                <div className=\"decorate\"></div>\r\n                <span className=\"update_frequecy\">{item.updateFrequency}</span>\r\n              </div>\r\n              {renderSongList(item.tracks)}\r\n            </ListItem>\r\n          );\r\n        })}\r\n      </List>\r\n    );\r\n  };\r\n\r\n  const displayStyle = loading ? { display: \"none\" } : { display: \"\" };\r\n\r\n  return (\r\n    <Container playCount={playCount}>\r\n      <Scroll>\r\n        <div>\r\n          <h1 className=\"official\" style={displayStyle}>\r\n            Official Rank\r\n          </h1>\r\n          {renderRankList(officialList)}\r\n          <h1 className=\"global\" style={displayStyle}>\r\n            Global Rank\r\n          </h1>\r\n          {renderRankList(globalList, true)}\r\n          {loading ? (\r\n            <EnterLoading>\r\n              <Loading></Loading>\r\n            </EnterLoading>\r\n          ) : null}\r\n        </div>\r\n      </Scroll>\r\n      {renderRoutes(props.route.routes)}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default React.memo(Rank);\r\n","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const Container = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: ${(props) => (props.playCount ? \"60px\" : \"0\")};\r\n  z-index: 100;\r\n  background: ${style[\"background-color\"]};\r\n  transform-origin: right bottom;\r\n  &.fly-appear {\r\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\r\n  }\r\n  &.fly-appear.fly-appear-active,\r\n  &.fly-appear-done.fly-enter-done {\r\n    transition: transform 0.3s;\r\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\r\n  }\r\n  &.fly-exit.fly-exit-active {\r\n    transition: transform 0.3s;\r\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\r\n  }\r\n`;\r\n\r\nexport const TopDesc = styled.div`\r\n  background-size: 100%;\r\n  padding: 5px 20px;\r\n  padding-bottom: 50px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 275px;\r\n  position: relative;\r\n  .background {\r\n    z-index: -1;\r\n    background: url(${(props) => props.background}) no-repeat;\r\n    background-position: 0 0;\r\n    background-size: 100% 100%;\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    filter: blur(20px);\r\n    .filter {\r\n      position: absolute;\r\n      z-index: 10;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: rgba(7, 17, 27, 0.2);\r\n    }\r\n  }\r\n  .img_wrapper {\r\n    width: 120px;\r\n    height: 120px;\r\n    position: relative;\r\n    .decorate {\r\n      position: absolute;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 35px;\r\n      border-radius: 3px;\r\n      background: linear-gradient(\r\n        hsla (0, 0%, 43%, 0.4),\r\n        hsla (0, 0%, 100%, 0)\r\n      );\r\n    }\r\n    .play_count {\r\n      position: absolute;\r\n      right: 2px;\r\n      top: 2px;\r\n      font-size: ${style[\"font-size-s\"]};\r\n      line-height: 15px;\r\n      color: ${style[\"font-color-light\"]};\r\n      .play {\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    img {\r\n      width: 120px;\r\n      height: 120px;\r\n      border-radius: 3px;\r\n    }\r\n  }\r\n  .desc_wrapper {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    height: 120px;\r\n    padding: 0 10px;\r\n    .title {\r\n      max-height: 70px;\r\n      color: ${style[\"font-color-light\"]};\r\n      font-weight: 700;\r\n      line-height: 1.5;\r\n      font-size: ${style[\"font-size-l\"]};\r\n    }\r\n    .person {\r\n      display: flex;\r\n      .avatar {\r\n        width: 20px;\r\n        height: 20px;\r\n        margin-right: 5px;\r\n        img {\r\n          width: 100%;\r\n          height: 100%;\r\n          border-radius: 50%;\r\n        }\r\n      }\r\n      .name {\r\n        line-height: 20px;\r\n        font-size: ${style[\"font-size-m\"]};\r\n        color: ${style[\"font-color-desc-v2\"]};\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Menu = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  box-sizing: border-box;\r\n  padding: 0 30px 20px 30px;\r\n  margin: -100px 0 0 0;\r\n  > div {\r\n    display: flex;\r\n    flex-direction: column;\r\n    line-height: 20px;\r\n    text-align: center;\r\n    font-size: ${style[\"font-size-s\"]};\r\n    color: ${style[\"font-color-light\"]};\r\n    z-index: 1000;\r\n    font-weight: 500;\r\n    > span {\r\n      font-size: 20px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SongList = styled.div`\r\n  border-radius: 10px;\r\n  opacity: 0.98;\r\n  ${(props) =>\r\n    props.showBackground\r\n      ? `background: ${style[\"highlight-background-color\"]}`\r\n      : \"\"};\r\n  .first_line {\r\n    box-sizing: border-box;\r\n    padding: 10px 0;\r\n    margin-left: 10px;\r\n    position: relative;\r\n    justify-content: space-between;\r\n    border-bottom: 1px solid ${style[\"border-color\"]};\r\n    .play_all {\r\n      display: inline-block;\r\n      line-height: 24px;\r\n      color: ${style[\"font-color-desc\"]};\r\n      .i {\r\n        font-size: 24px;\r\n        margin-right: 10px;\r\n        vertical-align: top;\r\n      }\r\n      .sum {\r\n        font-size: ${style[\"font-size-s\"]};\r\n        color: ${style[\"font-color-desc-v2\"]};\r\n      }\r\n      > span {\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    .add_list,\r\n    .isCollected {\r\n      display: flex;\r\n      align-items: center;\r\n      position: absolute;\r\n      right: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      width: 130px;\r\n      line-height: 34px;\r\n      background: ${style[\"theme-color\"]};\r\n      color: ${style[\"font-color-light\"]};\r\n      font-size: 0;\r\n      border-radius: 3px;\r\n      vertical-align: top;\r\n      i {\r\n        vertical-align: top;\r\n        font-size: 10px;\r\n        margin: 0 5px 0 10px;\r\n      }\r\n      span {\r\n        font-size: 14px;\r\n        line-height: 34px;\r\n      }\r\n    }\r\n    .isCollected {\r\n      display: flex;\r\n      background: ${style[\"background-color\"]};\r\n      color: ${style[\"font-color-desc\"]};\r\n    }\r\n  }\r\n`;\r\nexport const SongItem = styled.ul`\r\n  > li {\r\n    display: flex;\r\n    height: 60px;\r\n    align-items: center;\r\n    .index {\r\n      flex-basis: 60px;\r\n      width: 60px;\r\n      height: 60px;\r\n      line-height: 60px;\r\n      text-align: center;\r\n    }\r\n    .info {\r\n      box-sizing: border-box;\r\n      flex: 1;\r\n      display: flex;\r\n      height: 100%;\r\n      padding: 5px 0;\r\n      flex-direction: column;\r\n      justify-content: space-around;\r\n      border-bottom: 1px solid ${style[\"border-color\"]};\r\n      ${style.noWrap()}\r\n      >span {\r\n        ${style.noWrap()}\r\n      }\r\n      > span:first-child {\r\n        color: ${style[\"font-color-desc\"]};\r\n      }\r\n      > span:last-child {\r\n        font-size: ${style[\"font-size-s\"]};\r\n        color: #bba8a8;\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\nimport { PropTypes } from \"prop-types\";\r\n\r\nconst HeaderContainer = styled.div`\r\n  position: fixed;\r\n  padding: 5px 10px;\r\n  padding-top: 0;\r\n  height: 40px;\r\n  width: 100%;\r\n  z-index: 100;\r\n  display: flex;\r\n  line-height: 40px;\r\n  color: ${style[\"font-color-light\"]};\r\n  .back {\r\n    margin-right: 5px;\r\n    font-size: 20px;\r\n    width: 20px;\r\n  }\r\n  > h1 {\r\n    font-size: ${style[\"font-size-l\"]};\r\n    font-weight: 700;\r\n  }\r\n`;\r\n\r\nconst Header = React.forwardRef((props, ref) => {\r\n  const { handleClick, title } = props;\r\n\r\n  return (\r\n    <HeaderContainer ref={ref}>\r\n      <span>\r\n        <i className=\"fa fa-arrow-left\" onClick={handleClick}></i>\r\n      </span>\r\n      <h1>{title}</h1>\r\n    </HeaderContainer>\r\n  );\r\n});\r\n\r\nHeader.defaultProps = {\r\n  handleClick: () => {},\r\n  title: \"\",\r\n};\r\n\r\nHeader.propTypes = {\r\n  handleClick: PropTypes.func,\r\n  title: PropTypes.string,\r\n};\r\n\r\nexport default React.memo(Header);\r\n","import { CHANGE_CURRENT_ALBUM, CHANGE_ENTER_LOADING } from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nexport const changeCurrentAlbum = (data) => ({\r\n  type: CHANGE_CURRENT_ALBUM,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changeEnterLoading = (data) => ({\r\n  type: CHANGE_ENTER_LOADING,\r\n  data,\r\n});\r\n","export const CHANGE_CURRENT_ALBUM = \"album/CHANGE_CURRENT_ALBUM\";\r\nexport const CHANGE_ENTER_LOADING = \"album/CHANGE_ENTER_LOADING\";\r\n","import React, {\r\n  useEffect,\r\n  useImperativeHandle,\r\n  useRef,\r\n  forwardRef,\r\n} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nconst Container = styled.div`\r\n  .icon_wrapper {\r\n    position: fixed;\r\n    z-index: 1000;\r\n    margin-top: -10px;\r\n    margin-left: -10px;\r\n    color: ${style[\"theme-color\"]};\r\n    font-size: 14px;\r\n    display: none;\r\n    transition: transform 1s cubic-bezier(0.62, -0.1, 0.86, 0.57);\r\n    transform: translate3d(0, 0, 0);\r\n    > div {\r\n      transition: transform 1s;\r\n    }\r\n  }\r\n`;\r\n\r\nconst MusicNote = forwardRef((props, ref) => {\r\n  const iconsRef = useRef();\r\n\r\n  const ICON_NUMBER = 10;\r\n\r\n  const createNode = (txt) => {\r\n    const template = `<div class='icon_wrapper'>${txt}</div>`;\r\n    let tempNode = document.createElement(\"div\");\r\n    tempNode.innerHTML = template;\r\n    return tempNode.firstChild;\r\n  };\r\n\r\n  useEffect(() => {\r\n    for (let i = 0; i < ICON_NUMBER; i++) {\r\n      let node = createNode(`<div class=\"fa fa-music\"></div>`);\r\n      iconsRef.current.appendChild(node);\r\n    }\r\n    let domArray = [].slice.call(iconsRef.current.children);\r\n    domArray.forEach((item) => {\r\n      item.running = false;\r\n      item.addEventListener(\r\n        \"transitionend\",\r\n        function () {\r\n          this.style[\"display\"] = \"none\";\r\n          this.style[\"transform\"] = `translate3d(0, 0, 0)`;\r\n          this.running = false;\r\n\r\n          let icon = this.querySelector(\"div\");\r\n          icon.style[\"transform\"] = `translate3d(0, 0, 0)`;\r\n        },\r\n        false\r\n      );\r\n    });\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const startAnimation = ({ x, y }) => {\r\n    // console.log(x, y);\r\n    for (let i = 0; i < ICON_NUMBER; i++) {\r\n      let domArray = [].slice.call(iconsRef.current.children);\r\n      let item = domArray[i];\r\n      // 选择一个空闲的元素来开始动画\r\n      if (item.running === false) {\r\n        item.style.left = x + \"px\";\r\n        item.style.top = y + \"px\";\r\n        item.style.display = \"inline-block\";\r\n        setTimeout(() => {\r\n          item.running = true;\r\n          item.style[\"transform\"] = `translate3d(0, 750px, 0)`;\r\n          let icon = item.querySelector(\"div\");\r\n          icon.style[\"transform\"] = `translate3d(-40px, 0, 0)`;\r\n        }, 20);\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    startAnimation,\r\n  }));\r\n\r\n  return <Container ref={iconsRef}></Container>;\r\n});\r\n\r\nexport default React.memo(MusicNote);\r\n","import React, { useState, useRef, useCallback } from \"react\";\r\nimport { Container, TopDesc, Menu, SongList, SongItem } from \"./style\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport Header from \"../../baseUI/Header\";\r\nimport Scroll from \"../../baseUI/Scroll\";\r\nimport { getCount, getName, isEmptyObject } from \"../../api/utils\";\r\nimport style from \"../../assets/global-style\";\r\nimport { useAlbum } from \"./store/model\";\r\nimport Loading from \"../../baseUI/Loading\";\r\nimport { HEADER_HEIGHT } from \"../../api/config\";\r\nimport MusicNote from \"../../baseUI/MusicNote\";\r\nimport { usePlayer } from \"../Player/store/model\";\r\n\r\nconst Album = (props) => {\r\n  const id = props.match.params.id;\r\n\r\n  const { enterLoading, currentAlbum } = useAlbum(id);\r\n\r\n  const [showStatus, setShowStatus] = useState(true);\r\n\r\n  const {\r\n    playCount,\r\n    changeMusicPlayList,\r\n    changeCurrentPlayListIndex,\r\n  } = usePlayer();\r\n\r\n  const handleBack = useCallback(() => {\r\n    setShowStatus(false);\r\n  }, []);\r\n\r\n  const HeaderEl = useRef(null);\r\n\r\n  const musicNoteRef = useRef(null);\r\n\r\n  const selectItem = (e, index) => {\r\n    changeMusicPlayList(currentAlbum.tracks);\r\n    changeCurrentPlayListIndex(index);\r\n    musicNoteRef.current.startAnimation({\r\n      x: e.nativeEvent.clientX,\r\n      y: e.nativeEvent.clientY,\r\n    });\r\n  };\r\n\r\n  const handleScroll = useCallback(\r\n    (pos) => {\r\n      const minScrollY = -HEADER_HEIGHT;\r\n      let percent = Math.abs(pos.y / minScrollY);\r\n      const headerDom = HeaderEl.current;\r\n      if (pos.y < minScrollY) {\r\n        headerDom.style.backgroundColor = style[\"theme-color\"];\r\n        headerDom.style.opacity = Math.min(1, (percent - 1) / 2);\r\n      } else {\r\n        headerDom.style.backgroundColor = \"\";\r\n        headerDom.style.opacity = 1;\r\n      }\r\n    },\r\n    [currentAlbum]\r\n  );\r\n\r\n  const renderMenu = () => {\r\n    const menuList = [\r\n      {\r\n        icon: \"comment\",\r\n        title: \"评论\",\r\n      },\r\n      {\r\n        icon: \"heart\",\r\n        title: \"点赞\",\r\n      },\r\n      {\r\n        icon: \"plus\",\r\n        title: \"收藏\",\r\n      },\r\n      {\r\n        icon: \"ellipsis-v\",\r\n        title: \"更多\",\r\n      },\r\n    ];\r\n\r\n    return (\r\n      <Menu>\r\n        {menuList.map((item) => (\r\n          <div key={item.icon}>\r\n            <i className={`fa fa-${item.icon}`}></i>\r\n            {item.title}\r\n          </div>\r\n        ))}\r\n      </Menu>\r\n    );\r\n  };\r\n\r\n  const renderSongList = () => (\r\n    <SongList showBackground>\r\n      <div className=\"first_line\">\r\n        <div\r\n          className=\"play_all\"\r\n          onClick={(e) => {\r\n            selectItem(e, 0);\r\n          }}\r\n        >\r\n          <i className=\"fa fa-play-circle\"></i>\r\n          <span>\r\n            {\" \"}\r\n            播放全部{\" \"}\r\n            <span className=\"sum\">(共 {currentAlbum.tracks.length} 首)</span>\r\n          </span>\r\n        </div>\r\n        <div className=\"add_list\">\r\n          <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>\r\n          <span> 收藏 ({getCount(currentAlbum.subscribedCount)})</span>\r\n        </div>\r\n      </div>\r\n      <SongItem>\r\n        {currentAlbum.tracks.map((item, index) => (\r\n          <li\r\n            key={index}\r\n            onClick={(e) => {\r\n              selectItem(e, index);\r\n            }}\r\n          >\r\n            <span className=\"index\">{index + 1}</span>\r\n            <div className=\"info\">\r\n              <span>{item.name}</span>\r\n              <span>\r\n                {getName(item.ar)} - {item.al.name}\r\n              </span>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </SongItem>\r\n      <MusicNote ref={musicNoteRef}></MusicNote>\r\n    </SongList>\r\n  );\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={showStatus}\r\n      timeout={300}\r\n      classNames=\"fly\"\r\n      unmountOnExit\r\n      appear={true}\r\n      onExited={props.history.goBack}\r\n    >\r\n      <Container playCount={playCount}>\r\n        <Header title=\"返回\" handleClick={handleBack} ref={HeaderEl}></Header>\r\n        {enterLoading ? <Loading></Loading> : null}\r\n        {!isEmptyObject(currentAlbum) ? (\r\n          <Scroll bounceTop={false} onScroll={handleScroll}>\r\n            <div>\r\n              <TopDesc background={currentAlbum.coverImgUrl}>\r\n                <div className=\"background\">\r\n                  <div className=\"filter\"></div>\r\n                </div>\r\n                <div className=\"img_wrapper\">\r\n                  <div className=\"decorate\"></div>\r\n                  <img src={currentAlbum.coverImgUrl} />\r\n                  <div className=\"play_count\">\r\n                    <i className=\"fa fa-play\"></i>\r\n                    <span className=\"count\">\r\n                      {Math.floor(currentAlbum.subscribedCount / 1000)} T\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </TopDesc>\r\n              {renderMenu()}\r\n              {renderSongList()}\r\n            </div>\r\n          </Scroll>\r\n        ) : null}\r\n      </Container>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nexport default React.memo(Album);\r\n","import { useEffect } from \"react\";\r\nimport { getAlbumDetailRequest } from \"../../../api/request\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { changeCurrentAlbum, changeEnterLoading } from \"./actionCreator\";\r\n\r\nexport const useAlbum = (id) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const currentAlbum =\r\n    useSelector((state) => state.getIn([\"album\", \"currentAlbum\"])).toJS() || {};\r\n\r\n  const enterLoading = useSelector((state) =>\r\n    state.getIn([\"album\", \"enterLoading\"])\r\n  );\r\n\r\n  const getAlbumList = async () => {\r\n    const result = await getAlbumDetailRequest(id);\r\n    dispatch(changeCurrentAlbum(result.playlist));\r\n    dispatch(changeEnterLoading(false));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAlbumList();\r\n  }, [id]);\r\n\r\n  return {\r\n    enterLoading,\r\n    currentAlbum,\r\n  };\r\n};\r\n","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const Container = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: ${(props) => (props.playCount > 0 ? \"60px\" : 0)};\r\n  width: 100%;\r\n  z-index: 100;\r\n  overflow: hidden;\r\n  background: #f2f3f4;\r\n  transform-origin: right bottom;\r\n  &.fly-appear {\r\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\r\n  }\r\n  &.fly-appear.fly-appear-active,\r\n  &.fly-appear-done.fly-enter-done {\r\n    transition: transform 0.3s;\r\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\r\n  }\r\n  &.fly-exit.fly-exit-active {\r\n    transition: transform 0.3s;\r\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\r\n  }\r\n`;\r\n\r\nexport const ImgWrapper = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 0;\r\n  padding-top: 75%;\r\n  transform-origin: top;\r\n  background: url(${(props) => props.bgUrl});\r\n  background-size: cover;\r\n  z-index: 50;\r\n  .filter {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(7, 17, 27, 0.3);\r\n  }\r\n`;\r\n\r\nexport const CollectButton = styled.div`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  box-sizing: border-box;\r\n  width: 120px;\r\n  height: 40px;\r\n  margin-top: -55px;\r\n  z-index: 50;\r\n  background: ${style[\"theme-color\"]};\r\n  color: ${style[\"font-color-light\"]};\r\n  border-radius: 20px;\r\n  text-align: center;\r\n  font-size: 0;\r\n  line-height: 40px;\r\n  > i {\r\n    display: inline-block;\r\n    margin-right: 10px;\r\n    font-size: 12px;\r\n    vertical-align: 1px;\r\n  }\r\n  .text {\r\n    display: inline-block;\r\n    font-size: 14px;\r\n    letter-spacing: 5px;\r\n  }\r\n`;\r\n\r\nexport const SongListWrapper = styled.div`\r\n  position: absolute;\r\n  z-index: 50;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  > div {\r\n    position: absolute;\r\n    left: 0;\r\n    width: 100%;\r\n    overflow: visible;\r\n  }\r\n`;\r\n\r\nexport const BgLayer = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  background: white;\r\n  border-radius: 10px;\r\n  z-index: 50;\r\n`;\r\n","import styled from \"styled-components\";\r\nimport style from \"../../assets/global-style\";\r\n\r\nexport const SongList = styled.div`\r\n  border-radius: 10px;\r\n  opacity: 0.98;\r\n  // 注意在这里背景改为自配置参数控制\r\n  ${(props) =>\r\n    props.showBackground\r\n      ? `background: ${style[\"highlight-background-color\"]}`\r\n      : \"\"};\r\n  .first_line {\r\n    box-sizing: border-box;\r\n    padding: 10px 0;\r\n    margin-left: 10px;\r\n    position: relative;\r\n    justify-content: space-between;\r\n    border-bottom: 1px solid ${style[\"border-color\"]};\r\n    .play_all {\r\n      display: inline-block;\r\n      line-height: 24px;\r\n      color: ${style[\"font-color-desc\"]};\r\n      .iconfont {\r\n        font-size: 24px;\r\n        margin-right: 10px;\r\n        vertical-align: top;\r\n      }\r\n      .sum {\r\n        font-size: ${style[\"font-size-s\"]};\r\n        color: ${style[\"font-color-desc-v2\"]};\r\n      }\r\n      > span {\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    .add_list,\r\n    .isCollected {\r\n      display: flex;\r\n      align-items: center;\r\n      position: absolute;\r\n      right: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      width: 130px;\r\n      line-height: 34px;\r\n      background: ${style[\"theme-color\"]};\r\n      color: ${style[\"font-color-light\"]};\r\n      font-size: 0;\r\n      border-radius: 3px;\r\n      vertical-align: top;\r\n      .iconfont {\r\n        vertical-align: top;\r\n        font-size: 10px;\r\n        margin: 0 5px 0 10px;\r\n      }\r\n      span {\r\n        font-size: 14px;\r\n        line-height: 34px;\r\n      }\r\n    }\r\n    .isCollected {\r\n      display: flex;\r\n      background: ${style[\"background-color\"]};\r\n      color: ${style[\"font-color-desc\"]};\r\n    }\r\n  }\r\n`;\r\nexport const SongItem = styled.ul`\r\n  > li {\r\n    display: flex;\r\n    height: 60px;\r\n    align-items: center;\r\n    .index {\r\n      flex-basis: 60px;\r\n      width: 60px;\r\n      height: 60px;\r\n      line-height: 60px;\r\n      text-align: center;\r\n    }\r\n    .info {\r\n      box-sizing: border-box;\r\n      flex: 1;\r\n      display: flex;\r\n      height: 100%;\r\n      padding: 5px 0;\r\n      flex-direction: column;\r\n      justify-content: space-around;\r\n      border-bottom: 1px solid ${style[\"border-color\"]};\r\n      ${style.noWrap()};\r\n      > span {\r\n        ${style.noWrap()};\r\n      }\r\n      > span:first-child {\r\n        color: ${style[\"font-color-desc\"]};\r\n      }\r\n      > span:last-child {\r\n        font-size: ${style[\"font-size-s\"]};\r\n        color: #bba8a8;\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { SongList, SongItem } from \"./style\";\r\nimport { getName } from \"../../api/utils\";\r\nimport { usePlayer } from \"../Player/store/model\";\r\n\r\nconst SongsList = React.forwardRef((props, refs) => {\r\n  const { collectCount, showCollect, songs, musicAnimation } = props;\r\n\r\n  const { changeMusicPlayList, changeCurrentPlayListIndex } = usePlayer();\r\n\r\n  const totalCount = songs.length;\r\n\r\n  const selectItem = (e, index) => {\r\n    e.persist();\r\n    changeMusicPlayList(songs);\r\n    changeCurrentPlayListIndex(index);\r\n    musicAnimation(e.clientX, e.clientY);\r\n  };\r\n\r\n  const songList = (list) => {\r\n    let res = [];\r\n    for (let i = 0; i < list.length; i++) {\r\n      let item = list[i];\r\n      res.push(\r\n        <li key={i} onClick={(e) => selectItem(e, i)}>\r\n          <span className=\"index\">{i + 1}</span>\r\n          <div className=\"info\">\r\n            <span>{item.name}</span>\r\n            <span>\r\n              {item.ar ? getName(item.ar) : getName(item.artists)} -{\" \"}\r\n              {item.al ? item.al.name : item.album.name}\r\n            </span>\r\n          </div>\r\n        </li>\r\n      );\r\n    }\r\n    return res;\r\n  };\r\n\r\n  const collect = (count) => {\r\n    return (\r\n      <div className=\"add_list\">\r\n        <i className=\"iconfont\">&#xe62d;</i>\r\n        <span> 收藏 ({Math.floor(count / 1000)} T)</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <SongList ref={refs} showBackground={props.showBackground}>\r\n      <div className=\"first_line\">\r\n        <div className=\"play_all\" onClick={(e) => selectItem(e, 0)}>\r\n          <i className=\"fa fa-play\"></i>\r\n          <span>\r\n            {\" \"}\r\n            播放全部 <span className=\"sum\">(共 {totalCount} 首)</span>\r\n          </span>\r\n        </div>\r\n        {showCollect ? collect(collectCount) : null}\r\n      </div>\r\n      <SongItem>{songList(songs)}</SongItem>\r\n    </SongList>\r\n  );\r\n});\r\n\r\nexport default React.memo(SongsList);\r\n","import {\r\n  CHANGE_ARTIST,\r\n  CHANGE_SONGS_OF_ARTIST,\r\n  CHANGE_ENTER_LOADING,\r\n} from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nexport const changeArtist = (data) => ({\r\n  type: CHANGE_ARTIST,\r\n  data: fromJS(data),\r\n});\r\n\r\nexport const changeSongs = (data) => ({\r\n  type: CHANGE_SONGS_OF_ARTIST,\r\n  data: fromJS(data),\r\n});\r\nexport const changeEnterLoading = (data) => ({\r\n  type: CHANGE_ENTER_LOADING,\r\n  data,\r\n});\r\n","export const CHANGE_ARTIST = \"singer/CHANGE_ARTIST\";\r\nexport const CHANGE_SONGS_OF_ARTIST = \"singer/CHANGE_SONGS_OF_ARTIST\";\r\nexport const CHANGE_ENTER_LOADING = \"singer/CHNAGE_ENTER_LOADING\";\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Home from \"../application/Home\";\r\nimport Recommend from \"../application/Recommend\";\r\nimport Singers from \"../application/Singers\";\r\nimport Rank from \"../application/Rank\";\r\nimport Album from \"../application/Album\";\r\nimport Singer from \"../application/Singer\";\r\nimport Search from \"../application/Search\";\r\n\r\nexport default [\r\n  {\r\n    path: \"/\",\r\n    component: Home,\r\n    routes: [\r\n      {\r\n        path: \"/\",\r\n        exact: true,\r\n        render: () => <Redirect to={\"/recommend\"} />,\r\n      },\r\n      {\r\n        path: \"/recommend\",\r\n        component: Recommend,\r\n        routes: [\r\n          {\r\n            path: \"/recommend/:id\",\r\n            component: Album,\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        path: \"/singers\",\r\n        component: Singers,\r\n        routes: [\r\n          {\r\n            path: \"/singers/:id\",\r\n            component: Singer,\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        path: \"/rank\",\r\n        component: Rank,\r\n        routes: [\r\n          {\r\n            path: \"/rank/:id\",\r\n            component: Album,\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        path: \"/search\",\r\n        component: Search,\r\n      },\r\n    ],\r\n  },\r\n];\r\n","import React, { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport {\r\n  Container,\r\n  ImgWrapper,\r\n  CollectButton,\r\n  BgLayer,\r\n  SongListWrapper,\r\n} from \"./style\";\r\nimport Header from \"../../baseUI/Header\";\r\nimport Scroll from \"../../baseUI/Scroll\";\r\nimport SongsList from \"../../application/SongList\";\r\nimport { HEADER_HEIGHT } from \"../../api/config\";\r\nimport { useSinger } from \"./store/model\";\r\nimport Loading from \"../../baseUI/Loading\";\r\nimport MusicNote from \"../../baseUI/MusicNote\";\r\nimport { usePlayer } from \"../Player/store/model\";\r\n\r\nconst Singer = (props) => {\r\n  const id = props.match.params.id;\r\n\r\n  const { artist, songsOfArtist, enterLoading } = useSinger(id);\r\n\r\n  const [showStatus, setShowStatus] = useState(true);\r\n\r\n  const { playCount } = usePlayer();\r\n\r\n  const collectButton = useRef();\r\n  const imageWrapper = useRef();\r\n  const songScrollWrapper = useRef();\r\n  const songScroll = useRef();\r\n  const header = useRef();\r\n  const layer = useRef();\r\n  const musicNoteRef = useRef();\r\n\r\n  const initialHeight = useRef(0);\r\n\r\n  const OFFSET = 5;\r\n\r\n  const initStyle = () => {\r\n    const h = imageWrapper.current.offsetHeight;\r\n    songScrollWrapper.current.style.top = `${h - OFFSET}px`;\r\n    initialHeight.current = h;\r\n    layer.current.style.top = `${h - OFFSET}px`;\r\n    songScroll.current.refresh();\r\n  };\r\n\r\n  const handleScroll = useCallback((pos) => {\r\n    let height = initialHeight.current;\r\n    const newY = pos.y;\r\n    const imageDOM = imageWrapper.current;\r\n    const buttonDOM = collectButton.current;\r\n    const headerDOM = header.current;\r\n    const layerDOM = layer.current;\r\n    const minScrollY = -(height - OFFSET) + HEADER_HEIGHT;\r\n\r\n    // 指的是滑动距离占图片高度的百分比\r\n    const percent = Math.abs(newY / height);\r\n    if (newY > 0) {\r\n      imageDOM.style[\"transform\"] = `scale(${1 + percent})`;\r\n      buttonDOM.style[\"transform\"] = `translate3d(0, ${newY}px, 0)`;\r\n      layerDOM.style.top = `${height - OFFSET + newY}px`;\r\n    } else if (newY >= minScrollY) {\r\n      layerDOM.style.top = `${height - OFFSET - Math.abs(newY)}px`;\r\n      // 这时候保证遮罩的层叠优先级比图片高，不至于被图片挡住\r\n      layerDOM.style.zIndex = 1;\r\n      imageDOM.style.paddingTop = \"75%\";\r\n      imageDOM.style.height = 0;\r\n      imageDOM.style.zIndex = -1;\r\n      // 按钮跟着移动且渐渐变透明\r\n      buttonDOM.style[\"transform\"] = `translate3d (0, ${newY}px, 0)`;\r\n      buttonDOM.style[\"opacity\"] = `${1 - percent * 2}`;\r\n    } else if (newY < minScrollY) {\r\n      // 往上滑动，但是超过 Header 部分\r\n      layerDOM.style.top = `${HEADER_HEIGHT - OFFSET}px`;\r\n      layerDOM.style.zIndex = 1;\r\n      // 防止溢出的歌单内容遮住 Header\r\n      headerDOM.style.zIndex = 100;\r\n      // 此时图片高度与 Header 一致\r\n      imageDOM.style.height = `${HEADER_HEIGHT}px`;\r\n      imageDOM.style.paddingTop = 0;\r\n      imageDOM.style.zIndex = 99;\r\n    }\r\n  }, []);\r\n\r\n  const musicAnimation = (x, y) => {\r\n    musicNoteRef.current.startAnimation({ x, y });\r\n  };\r\n\r\n  useEffect(() => {\r\n    initStyle();\r\n  }, []);\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={showStatus}\r\n      timeout={300}\r\n      classNames=\"fly\"\r\n      appear={true}\r\n      unmountOnExit\r\n      onExited={() => props.history.goBack()}\r\n    >\r\n      <Container playCount={playCount}>\r\n        {enterLoading ? <Loading></Loading> : null}\r\n        <Header\r\n          title={\"head\"}\r\n          ref={header}\r\n          handleClick={() => setShowStatus(false)}\r\n        ></Header>\r\n        <ImgWrapper bgUrl={artist.picUrl} ref={imageWrapper}>\r\n          <div className=\"filter\"></div>\r\n        </ImgWrapper>\r\n        <CollectButton ref={collectButton}>\r\n          <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>\r\n          <span className=\"text\">收藏</span>\r\n        </CollectButton>\r\n        <BgLayer ref={layer}></BgLayer>\r\n        <SongListWrapper ref={songScrollWrapper}>\r\n          <Scroll ref={songScroll} onScroll={handleScroll}>\r\n            <SongsList\r\n              songs={songsOfArtist}\r\n              showCollect={false}\r\n              musicAnimation={musicAnimation}\r\n            ></SongsList>\r\n          </Scroll>\r\n        </SongListWrapper>\r\n        <MusicNote ref={musicNoteRef}></MusicNote>\r\n      </Container>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nexport default React.memo(Singer);\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getSingerInfoRequest } from \"../../../api/request\";\r\nimport { changeSongs, changeEnterLoading } from \"./actionCreator\";\r\nimport { CHANGE_ARTIST } from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nexport const useSinger = (id) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const artist =\r\n    useSelector((state) => state.getIn([\"singer\", \"artist\"])).toJS() || {};\r\n\r\n  const songsOfArtist =\r\n    useSelector((state) => state.getIn([\"singer\", \"songsOfArtist\"])).toJS() ||\r\n    [];\r\n\r\n  const enterLoading = useSelector((state) =>\r\n    state.getIn([\"singer\", \"enterLoading\"])\r\n  );\r\n\r\n  const getArtistAndHotSongs = async () => {\r\n    const result = await getSingerInfoRequest(id);\r\n    dispatch({\r\n      type: CHANGE_ARTIST,\r\n      data: fromJS(result.artist),\r\n    });\r\n    dispatch(changeSongs(result.hotSongs));\r\n    dispatch(changeEnterLoading(false));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getArtistAndHotSongs();\r\n  }, [id]);\r\n\r\n  return {\r\n    artist,\r\n    songsOfArtist,\r\n    enterLoading,\r\n  };\r\n};\r\n","import React from \"react\";\r\n\r\nconst Search = () => {\r\n  return <div>Search</div>;\r\n};\r\n\r\nexport default React.memo(Search);\r\n","import * as actionTypes from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nconst defaultState = fromJS({\r\n  bannerList: [],\r\n  recommendList: [],\r\n  enterLoading: true,\r\n});\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CHANGE_BANNER:\r\n      return state.set(\"bannerList\", action.data);\r\n    case actionTypes.CHANGE_RECOMMEND_LIST:\r\n      return state.set(\"recommendList\", action.data);\r\n    case actionTypes.CHANGE_ENTER_LOADING:\r\n      return state.set(\"enterLoading\", action.data);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { fromJS } from \"immutable\";\r\nimport * as actionTypes from \"./constant\";\r\n\r\nconst defaultState = fromJS({\r\n  singerList: [],\r\n  enterLoading: true,\r\n  pullUpLoading: false,\r\n  pullDownLoading: false,\r\n  pageCount: 0,\r\n});\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CHANGE_SINGER_LIST:\r\n      return state.set(\"singerList\", action.data);\r\n    case actionTypes.CHANGE_PAGE_COUNT:\r\n      return state.set(\"pageCount\", action.data);\r\n    case actionTypes.CHANGE_ENTER_LOADING:\r\n      return state.set(\"enterLoading\", action.data);\r\n    case actionTypes.CHANGE_PULLUP_LOADING:\r\n      return state.set(\"pullUpLoading\", action.data);\r\n    case actionTypes.CHANGE_PULLDOWN_LOADING:\r\n      return state.set(\"pullDownLoading\", action.data);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import * as actionTypes from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nconst defaultState = fromJS({\r\n  currentAlbum: {},\r\n  enterLoading: false,\r\n});\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CHANGE_CURRENT_ALBUM:\r\n      return state.set(\"currentAlbum\", action.data);\r\n    case actionTypes.CHANGE_ENTER_LOADING:\r\n      return state.set(\"enterLoading\", action.data);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { fromJS } from \"immutable\";\r\nimport {\r\n  CHANGE_ARTIST,\r\n  CHANGE_SONGS_OF_ARTIST,\r\n  CHANGE_ENTER_LOADING,\r\n} from \"./constant\";\r\n\r\nconst defaultState = fromJS({\r\n  artist: {},\r\n  songsOfArtist: [],\r\n  enterLoading: true,\r\n});\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case CHANGE_ARTIST:\r\n      return state.set(\"artist\", action.data);\r\n    case CHANGE_SONGS_OF_ARTIST:\r\n      return state.set(\"songsOfArtist\", action.data);\r\n    case CHANGE_ENTER_LOADING:\r\n      return state.set(\"loading\", action.data);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SET_CURRENT_SONG,\r\n  SET_FULL_SCREEN,\r\n  SET_PLAYING_STATE,\r\n  SET_SEQUENCE_PLAYLIST,\r\n  SET_PLAYLIST,\r\n  SET_PLAY_MODE,\r\n  SET_CURRENT_INDEX,\r\n  SET_SHOW_PLAYLIST,\r\n} from \"./constant\";\r\nimport { fromJS } from \"immutable\";\r\nimport { playMode } from \"../../../api/config\";\r\n\r\nconst defaultState = fromJS({\r\n  fullScreen: false, // 播放器是否全屏\r\n  playing: false, // 当前歌曲是否播放\r\n  sequencePlayList: [], // 顺序列表\r\n  playList: [],\r\n  mode: playMode.sequence, // 播放模式\r\n  currentIndex: -1, // 当前歌曲在播放列表中的索引\r\n  showPlayList: false, // 是否展示播放列表\r\n  currentSong: {},\r\n});\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case SET_CURRENT_SONG:\r\n      return state.set(\"currentSong\", action.data);\r\n    case SET_FULL_SCREEN:\r\n      return state.set(\"fullScreen\", action.data);\r\n    case SET_PLAYING_STATE:\r\n      return state.set(\"playing\", action.data);\r\n    case SET_SEQUENCE_PLAYLIST:\r\n      return state.set(\"sequencePlayList\", action.data);\r\n    case SET_PLAYLIST:\r\n      return state.set(\"playList\", action.data);\r\n    case SET_PLAY_MODE:\r\n      return state.set(\"mode\", action.data);\r\n    case SET_CURRENT_INDEX:\r\n      return state.set(\"currentIndex\", action.data);\r\n    case SET_SHOW_PLAYLIST:\r\n      return state.set(\"showPlayList\", action.data);\r\n    case SET_CURRENT_SONG:\r\n      return state.set(\"currentSong\", action.data);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux-immutable\";\r\nimport { reducer as recommendReducer } from \"../application/Recommend/store/index\";\r\nimport { reducer as singersReducer } from \"../application/Singers/store/index\";\r\nimport { reducer as rankReducer } from \"../application/Rank/store/index\";\r\nimport { reducer as albumReducer } from \"../application/Album/store/index\";\r\nimport { reducer as singerReducer } from \"../application/Singer/store/index\";\r\nimport { reducer as playerReducer } from \"../application/Player/store/index\";\r\n\r\nexport default combineReducers({\r\n  recommend: recommendReducer,\r\n  singers: singersReducer,\r\n  rank: rankReducer,\r\n  album: albumReducer,\r\n  singer: singerReducer,\r\n  player: playerReducer,\r\n});\r\n","import { createStore, compose, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./reducer\";\r\nconst composeEnhances = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(reducer, composeEnhances(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport { GlobalStyle } from \"./style\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport { renderRoutes } from \"react-router-config\";\r\nimport routes from \"./router/index\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <HashRouter>\r\n        <GlobalStyle />\r\n        {renderRoutes(routes)}\r\n      </HashRouter>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <div>\r\n    <App />\r\n  </div>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}